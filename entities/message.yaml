# Message Entity
# A chat message — text sent from one person to another
#
# Independent root — not a document. Messages don't have titles,
# URLs, or publication semantics. They have delivery semantics
# (sent/delivered/read) and exist within conversations.
#
# Formerly extended `writing` with vocabulary override (author → sender).
# Now standalone with `sender` declared natively. "Show me everything
# by person X" works via graph traversal (follow sender/author/creator
# references), not type inheritance.
#
# Research: NEPOMUK and ActivityStreams both model messages as
# siblings of documents, not children.

id: message
plural: messages
name: Message
description: A chat message

references:
  schema_org: https://schema.org/Message
  wikidata: Q628523

properties:
  id:
    type: string
    required: true
    description: Unique identifier

  content:
    type: string
    required: true
    description: Message content

  sender:
    references: person
    description: Who sent this message

  conversation_id:
    type: string
    required: true
    description: Parent conversation ID
    references: conversation

  is_outgoing:
    type: boolean
    description: Whether message was sent by user

  timestamp:
    type: datetime
    required: true
    description: When message was sent

  status:
    type: string
    enum: [sending, sent, delivered, read, failed]
    description: Delivery status

  read:
    type: boolean
    default: false
    description: Whether message has been read

  read_at:
    type: datetime
    description: When message was read

  attachments:
    type: array
    description: Media attachments

  reactions:
    type: array
    description: Emoji reactions

operations: [list, get, create, search]

display:
  primary: content
  secondary: sender
  icon: message-circle
