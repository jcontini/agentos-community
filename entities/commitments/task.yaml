# Task â€” An Actionable Outcome
#
# The most common subtype of outcome. What task managers create.
# Inherits all properties from outcome (name, description, value,
# target, achieved, ended, output, indicators, data, etc.)

id: task
plural: tasks
name: Task
extends: commitment
description: An actionable outcome from task management tools

display:
  primary: name
  status: data.completed
  icon: checkbox
  sort:
    - field: data.completed
      completed_last: true
    - field: target.date
      null_last: true
    - field: name
      order: asc

computed:
  status: |
    if .completed then "done"
    elif (.blockers | length > 0) and (.blockers | any(.completed != true)) then "blocked"
    else "ready"
    end
  priority_label: |
    if .priority == 1 then "critical"
    elif .priority == 2 then "high"
    elif .priority == 3 then "medium"
    else "low"
    end

computed_relationships:
  blockers:
    type: enables
    direction: incoming
    fields: [completed]
