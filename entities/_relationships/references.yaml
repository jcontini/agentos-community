# References — The Universal Graph Edge
#
# Any entity can reference any other entity, with a role
# describing the nature of the connection. This is the
# general-purpose relationship type for building a knowledge graph.
#
# Unlike typed relationships (enables, contains), references is
# open-ended. The `role` property carries the semantics.
#
# Each relationship is ONE edge with TWO labels: name (forward) and
# inverse_name (reverse). The same edge reads differently depending
# on which end you're standing on. No duplicate edges needed.
#
# Roles are open strings, not an enum. New roles emerge as the
# graph grows. Adapters, agents, and users can introduce roles
# without schema changes. Registered roles (below) get proper
# display labels; unregistered roles fall back to the raw string.
#
# Research lineage:
#   - Dublin Core "relation" element (15 core elements for documents)
#   - Schema.org mentions/about (CreativeWork properties)
#   - NEPOMUK NIE ontology (content relationships)
#   - Open Graph Protocol (structured web references)
#   - FRBR (Functional Requirements for Bibliographic Records)
#   - BIBFRAME (Library of Congress linked data model)
#   - OWL inverse labels (one edge, two display names)
#
# Examples (forward direction, from → to):
#   vision (document) ──references (about)──→ symbiosis (concept)
#   vision (document) ──references (cites)──→ Licklider (person)
#   transcript (document) ──references (transcript_of)──→ video
#   hamlet-text ──references (expression_of)──→ hamlet (work)
#   post ──references (embeds)──→ video (media)
#   person ──references (director)──→ video (media)
#
# Same edges read in reverse (to → from):
#   symbiosis is **subject of** vision
#   Licklider is **cited by** vision
#   video **has transcript** transcript
#   hamlet **has expression** hamlet-text
#   video is **embedded in** post
#   video **directed by** person

id: references
name: References
inverse_name: Referenced by
description: A general-purpose link between entities, with a role describing the nature of the connection

is_relationship: true

# Universal — any entity can reference any entity.
# Omitting from_type/to_type means unconstrained (wildcard).
# The Rust resolver treats empty constraints as "match all."

properties:
  role:
    type: string
    description: The nature of the reference (see roles section below)

  context:
    type: string
    description: Why this reference exists — a human-readable explanation

  source:
    type: string
    description: Where this reference was discovered (e.g., "extracted from document content", "manually added", "adapter:youtube")

# Registered roles with display labels.
# Each role has a forward name (from→to) and inverse name (to→from).
# Roles are still open strings — unregistered roles work fine,
# they just won't have curated display labels.
roles:
  # --- Common roles ---
  about:
    name: About
    inverse_name: Subject of
    description: Primary subject ("this doc is about X")
  mentions:
    name: Mentions
    inverse_name: Mentioned in
    description: Referenced in passing
  cites:
    name: Cites
    inverse_name: Cited by
    description: Formal attribution
  inspired_by:
    name: Inspired by
    inverse_name: Inspires
    description: Creative influence
  derived_from:
    name: Derived from
    inverse_name: Source of
    description: Adaptation, fork, remix
  # responds_to — Moved to first-class `replies_to` relationship type (2026-02-09)
  # Threaded replies are now graph edges, not reference roles.
  # See entities/_relationships/replies_to.yaml

  related_to:
    name: Related to
    inverse_name: Related to
    description: General association (weakest link, symmetric)

  # --- FRBR roles (content relationships) ---
  expression_of:
    name: Expression of
    inverse_name: Has expression
    description: Concrete content → abstract work (English Hamlet text → "Hamlet" work)
  manifestation_of:
    name: Manifestation of
    inverse_name: Has manifestation
    description: Format/edition → expression (Kindle edition → English text)
  item_of:
    name: Item of
    inverse_name: Has item
    description: Specific copy → manifestation (my signed copy → first-edition hardcover)
  variant_of:
    name: Variant of
    inverse_name: Has variant
    description: Same content, different format (logo SVG ↔ logo PNG)
  translation_of:
    name: Translation of
    inverse_name: Has translation
    description: Same content, different language
  adaptation_of:
    name: Adaptation of
    inverse_name: Has adaptation
    description: Derived creative work (LOTR film → LOTR novel)
  transcript_of:
    name: Transcript of
    inverse_name: Has transcript
    description: Text version of audio/video content
  version_of:
    name: Version of
    inverse_name: Has version
    description: Same thing, updated (Linux 6.1 → Linux 6.0)
  performance_of:
    name: Performance of
    inverse_name: Has performance
    description: Performed realization (live recording → sheet music)
  part_of:
    name: Part of
    inverse_name: Has part
    description: Component of larger work (chapter → book, episode → series)

  # --- Embedding roles ---
  embeds:
    name: Embeds
    inverse_name: Embedded in
    description: Content contains/presents media (container → contained)

  # --- Infrastructure roles ---
  runs_on:
    name: Runs on
    inverse_name: Powers
    description: Service/site is built on this software/platform (fosstodon.org runs on Mastodon, myblog.com runs on WordPress)
  made_by:
    name: Made by
    inverse_name: Makes
    description: Who originally created this product (historical — doesn't change with acquisitions)
  offered_by:
    name: Offered by
    inverse_name: Offers
    description: Who currently offers/operates/sells this product (changes with acquisitions, licensing, etc.)
  founded_by:
    name: Founded by
    inverse_name: Founded
    description: Organization founded by this person (temporal — use started_at for founding date)
  acquired_by:
    name: Acquired by
    inverse_name: Acquired
    description: Entity was acquired by this organization (temporal — use started_at; amount in relationship data)

  # --- Corporate structure roles ---
  parent_of:
    name: Parent of
    inverse_name: Subsidiary of
    description: Parent company → subsidiary (Xendit → PT Sinar Digital Terdepan)
  has_executive:
    name: Has executive
    inverse_name: Executive of
    description: Organization has this person as an executive (temporal — title, started_at, ended_at in relationship data)
  has_board_member:
    name: Has board member
    inverse_name: Board member of
    description: Organization has this person on its board (temporal — role like "Chairman", "Observer" in data)
  employee_of:
    name: Employee of
    inverse_name: Employs
    description: Person works/worked at this organization (temporal — title, department in data)
  advisor_to:
    name: Advisor to
    inverse_name: Has advisor
    description: Person advises this organization (temporal)
  partner_of:
    name: Partner of
    inverse_name: Partner of
    description: Strategic or business partnership between organizations (symmetric)
  # competitor_of — removed (2026-02-09). Competition should be computed
  # from shared categories/markets, not stored as an explicit relationship.

  # --- Location roles ---
  headquartered_in:
    name: Headquartered in
    inverse_name: Headquarters of
    description: Organization's primary HQ location
  operates_in:
    name: Operates in
    inverse_name: Has operations from
    description: Organization operates in this country/region
  has_office:
    name: Has office in
    inverse_name: Office of
    description: Organization has a physical office at this place (temporal — address in data)
  incorporated_in:
    name: Incorporated in
    inverse_name: Has incorporation of
    description: Organization is legally incorporated in this jurisdiction

  # --- Investment / funding roles ---
  raised:
    name: Raised
    inverse_name: Raised by
    description: Organization raised this funding round (org → milestone)
  invested_in:
    name: Invested in
    inverse_name: Invested in by
    description: Investor participated in this round (org/person → milestone; amount in data)
  led:
    name: Led
    inverse_name: Led by
    description: Lead investor of a funding round (org → milestone)

  # --- Government / contract roles ---
  contracted_by:
    name: Contracted by
    inverse_name: Contracts
    description: Organization was contracted/hired by this client (temporal — contract value, period in data)
  funded_by:
    name: Funded by
    inverse_name: Funds
    description: Project/organization funded by this entity (USAID, Gates Foundation, World Bank, etc.)
  regulates:
    name: Regulates
    inverse_name: Regulated by
    description: Organization has regulatory authority over another (Bank Indonesia regulates payment companies)
  administers:
    name: Administers
    inverse_name: Administered by
    description: Organization administers/oversees this entity or program

  # --- Licensing roles ---
  holds:
    name: Holds
    inverse_name: Held by
    description: Organization holds this license/certification
  issued_by:
    name: Issued by
    inverse_name: Issues
    description: License/certification issued by this authority/regulator
  valid_in:
    name: Valid in
    inverse_name: Has valid licenses for
    description: License is valid in this jurisdiction (place)

  # --- Usage roles ---
  uses:
    name: Uses
    inverse_name: Used by
    description: Person/org uses this product (temporal — started_at, ended_at; category/use_case in data)

  # --- Ownership / hosting roles ---
  owned_by:
    name: Owned by
    inverse_name: Owns
    description: General ownership — person/org owns this entity (repo, product, domain, etc.)
  hosted_at:
    name: Hosted at
    inverse_name: Hosts
    description: Code/adapter lives in this repository or platform

  # --- Authorship roles ---
  authored:
    name: Authored
    inverse_name: Authored by
    description: Person/org authored this work (book, paper, document)

  # --- Credits roles ---
  # Used with person → media/document for rich credits.
  # The `creator` property on media handles the primary creator;
  # credits roles handle the full cast/crew graph.
  director:
    name: Director of
    inverse_name: Directed by
    description: Directed this work
  actor:
    name: Actor in
    inverse_name: Features
    description: Performed in this work
  editor:
    name: Editor of
    inverse_name: Edited by
    description: Edited this work
  producer:
    name: Producer of
    inverse_name: Produced by
    description: Produced this work
  composer:
    name: Composer of
    inverse_name: Composed by
    description: Composed music for this work
  narrator:
    name: Narrator of
    inverse_name: Narrated by
    description: Narrated this work
