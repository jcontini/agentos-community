# Video — Video Content
#
# Extends work. Inherits: id, title, description, url, expressed_at, created_date.
# Properties formerly from media (published_at, duration_ms, thumbnail) are
# now declared directly since media was removed.
#
# Attribution: Uses `posts` relationship (account --posts--> video).
# The account is the observable source; the person behind it is linked
# via `claim`. This replaces the old `creator: references: person`.

id: video
plural: videos
extends: work
name: Video
description: Video content with metadata and optional transcript

references:
  schema_org: https://schema.org/VideoObject
  wikidata: Q34508  # video

properties:
  # From media (now declared directly)
  published_at:
    type: datetime
    description: When this video was published

  duration_ms:
    type: integer
    description: Duration in milliseconds

  thumbnail:
    references: image
    description: Thumbnail or cover image

  # Identity
  remote_id:
    type: string
    description: ID from the remote service (e.g., YouTube video ID "dQw4w9WgXcQ")

  # Content — transcript lives on a linked `transcript` entity (via `transcribes` relationship)

  chapters:
    type: array
    description: Chapter markers with timestamps
    items:
      title: string
      start_ms: integer

  # Technical (optional)
  resolution:
    type: string
    description: Video resolution (e.g., 1080p, 4K)

  codec:
    type: string
    description: Video codec (e.g., h264, vp9)

  # External sources (same video on different services)
  sources:
    type: array
    description: Where this video exists
    items:
      provider:
        type: string
        description: Service name (youtube, vimeo, local)
      id:
        type: string
        description: Provider-specific ID
      url:
        type: string
        format: url
        description: URL on that service

  # Engagement
  view_count:
    type: integer
    description: Number of views (if available from source)

  like_count:
    type: integer
    description: Number of likes (if available from source)

  comment_count:
    type: integer
    description: Number of comments (if available from source)

  # Metadata
  fetched_at:
    type: datetime
    description: When we retrieved this data

operations: [get, search, list, transcript]

display:
  primary: title
  secondary: posted_by.account.display_name  # Account attribution via posts relationship
  description: description
  image: thumbnail
  icon: play
  embed: url
  meta:
    - duration_ms
    - view_count
    - like_count
    - published_at
