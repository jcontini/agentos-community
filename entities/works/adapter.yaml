# Adapter — An Installed Adapter in the AgentOS Ecosystem
#
# Every adapter that the system detects on disk becomes an entity in the
# graph. This is how the system models itself — adapters aren't just
# runtime configs, they're first-class entities with relationships to
# products, organizations, repositories, and people.
#
# On server startup, after seed entities are processed, the system
# creates an entity for each loaded adapter. This is idempotent —
# existing adapter entities are skipped.
#
# Richness lives in relationships:
#   adapter → connects_to → product (the service it integrates with)
#   adapter → hosted_at → repository (source code)
#   adapter → authored_by → person/organization
#
# The adapter → product → organization chain makes the full ecosystem
# graph traversable:
#   YouTube adapter → connects_to → YouTube (product) → offered_by → Google (org)
#
# See: .ROADMAP/meta-entities.md

id: adapter
plural: adapters
extends: software
name: Adapter
description: An installed adapter — connects AgentOS to external services and data sources

properties:
  id:
    type: string
    required: true
    description: Unique identifier

  name:
    type: string
    required: true
    description: Adapter display name (e.g., "YouTube", "WhatsApp Local")

  description:
    type: string
    description: What this adapter does

  adapter_id:
    type: string
    required: true
    description: |
      Filesystem slug that uniquely identifies this adapter
      (e.g., "youtube", "whatsapp", "apple-calendar")

  version:
    type: string
    description: SemVer version string

  url:
    type: string
    format: url
    description: Adapter project page or documentation URL

  avatar:
    type: string
    format: url
    description: Adapter icon URL

  # Extensible data bag
  data:
    type: object
    description: |
      Adapter-specific metadata:
        Capabilities: { entity_types: ["video", "post"], operations: ["list", "get", "search"] }
        Auth:         { auth_type: "oauth2", scopes: ["read", "write"] }

  notes:
    type: string
    description: User notes about this adapter

identifiers: [adapter_id, name]

# No CRUD operations — adapter entities are system-managed.
# The /api/adapters management endpoint already exists for adapter config.
# Adapter entities are queryable through the graph/relationships.
# When data-routes.md is implemented (/data/* vs /api/* split), we can
# add operations here without collisions.
operations: []

display:
  primary: name
  secondary: adapter_id
  icon: plug
  sort:
    - field: name
      order: asc
