# Message — A Chat Message
#
# Extends post in the inheritance chain: work → document → post → message.
# Messages are posts with delivery semantics (sent/delivered/read)
# that exist within conversations (a place).
#
# Attribution via `send` relationship: actor --send--> message (into conversation).

id: message
plural: messages
extends: post
name: Message
description: A chat message

references:
  schema_org: https://schema.org/Message
  wikidata: Q628523

properties:
  id:
    type: string
    required: true
    description: Unique identifier

  content:
    type: string
    required: true
    description: Message content

  sender:
    references: person
    description: Who sent this message

  conversation_id:
    type: string
    required: true
    description: Parent conversation ID
    references: conversation

  is_outgoing:
    type: boolean
    description: Whether message was sent by user

  timestamp:
    type: datetime
    required: true
    description: When message was sent

  status:
    type: string
    enum: [sending, sent, delivered, read, failed]
    description: Delivery status

  read:
    type: boolean
    default: false
    description: Whether message has been read

  read_at:
    type: datetime
    description: When message was read

  attachments:
    type: array
    description: Media attachments

  reactions:
    type: array
    description: Emoji reactions

operations: [list, get, create, search]

display:
  primary: content
  secondary: sender
  icon: message-circle
