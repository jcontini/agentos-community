/* Chicago - the classic Mac OS system font */
@font-face {
  font-family: "Chicago";
  src: url(chicago.ttf) format("truetype");
  font-weight: normal;
  font-style: normal;
}

:root {
  --preferred-font: "Chicago", "Charcoal", Geneva, sans-serif;
  --desktop-bg: #9999CC;
  --window-bg: #DDDDDD;
  --window-fg: #000000;
  --window-frame-bg: #CCCCCC;
  --primary-0: #000;
  --primary-1: #005;
  --primary-2: #339;
  --primary-3: #66c;
  --primary-4: #99f;
  --primary-5: #ccf;
  --primary-6: #eee;
  --selection-bg: var(--primary-5);
  --selection-fg: #000;
  
  /* Chrome (OS UI) colors - used for window frames, menus, buttons */
  --chrome-bg: #CCCCCC;
  --chrome-bg-inactive: #ddd;
  --chrome-fg: #000;
  --chrome-fg-inactive: #777;
  --chrome-border: #000;
  --chrome-border-light: #fff;
  --chrome-border-medium: #aaa;
  --chrome-border-dark: #888;
  --chrome-border-darker: #555;
  --chrome-shadow: #999;
  
  /* Button colors */
  --button-bg: #DDDDDD;
  --button-bg-active: #666666;
  --button-shadow-light: #fff;
  --button-shadow-dark: #555;
  
  /* Tab colors */
  --tab-bg: #CCCCCC;
  --tab-bg-active: #eee;
  
  /* Menu colors */
  --menu-bg: #ddd;
  
  /* Scrollbar colors */
  --scrollbar-track: #aaa;
  --scrollbar-button: #ddd;
  --scrollbar-button-active: #777;
  
  /* Title bar stripe pattern */
  --titlebar-stripe-light: #fff;
  --titlebar-stripe-dark: #777;
  
  /* Hover overlay */
  --hover-overlay: rgba(0, 0, 0, 0.05);
}

/* =============================================================================
   Dark Mode - Chrome Overrides
   OS chrome (windows, menus, tabs, buttons) adapts to dark mode
   ============================================================================= */
[data-mode="dark"] {
  /* Cursor-inspired palette: softer darks instead of pure black */
  --desktop-bg: #1a1a2e;
  --window-bg: #1f1f1f;
  --window-fg: #d4d4d4;
  --window-frame-bg: #2a2a2a;
  
  /* Primary accent colors for dark mode */
  --primary-1: #224;
  --primary-2: #446;
  --primary-3: #668;
  --primary-4: #88a;
  --primary-5: #383848;
  --primary-6: #2a2a2a;
  --selection-bg: var(--primary-3);
  --selection-fg: #fff;
  
  /* Chrome colors - Cursor-style darks */
  --chrome-bg: #2a2a2a;
  --chrome-bg-inactive: #232323;
  --chrome-fg: #d4d4d4;
  --chrome-fg-inactive: #888;
  --chrome-border: #181818;
  --chrome-border-light: #404040;
  --chrome-border-medium: #353535;
  --chrome-border-dark: #2a2a2a;
  --chrome-border-darker: #1f1f1f;
  --chrome-shadow: #181818;
  
  /* Button colors */
  --button-bg: #353535;
  --button-bg-active: #454545;
  --button-shadow-light: #4a4a4a;
  --button-shadow-dark: #1a1a1a;
  
  /* Tab colors */
  --tab-bg: #2a2a2a;
  --tab-bg-active: #1f1f1f;
  
  /* Menu colors */
  --menu-bg: #2a2a2a;
  
  /* Scrollbar colors */
  --scrollbar-track: #1f1f1f;
  --scrollbar-button: #3a3a3a;
  --scrollbar-button-active: #454545;
  
  /* Title bar stripe pattern - more muted for dark mode */
  --titlebar-stripe-light: #404040;
  --titlebar-stripe-dark: #252525;
  
  /* Hover overlay */
  --hover-overlay: rgba(255, 255, 255, 0.08);
}

body {
  font-family: var(--preferred-font);
  color: var(--window-fg);
}

*, *::before, *::after {
  box-sizing: border-box;
}

button, input, textarea, select {
  font-family: inherit;
  font-size: inherit;
}

a:focus {
  outline: 1px dotted var(--darkest);
}

code {
  font-family: monospace;
}

.desktop {
  background: var(--desktop-bg);
}

.top-panel, .right-panel, .buttom-panel, .left-panel {
  background: var(--window-bg);
}

.top-panel {
  border-bottom: 1px solid var(--chrome-border);
  box-shadow: inset 1px 0 0 var(--chrome-border-light), inset 0 1px 0 var(--chrome-border-light), inset -1px 0 0 var(--chrome-shadow), inset 0 -1px 0 var(--chrome-shadow);
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
}

.lowered {
  border: 1px solid #888;
  border-right-color: #fff;
  border-bottom-color: #fff;
}

.raised {
  border: 1px solid #fff;
  border-right-color: #888;
  border-bottom-color: #888;
}

fieldset {
  border: 1px solid #888;
  box-shadow: inset 1px 1px 0 #fff, 1px 1px 0 #fff;
  position: relative;
}

legend {
  text-align: left;
  padding: 0 4px 0.65em;
  background-color: var(--content-bg);
  color: var(--content-fg);
  display: block;
}

.horizontal-scrollbar,
.vertical-scrollbar {
  display: grid;
}
.horizontal-scrollbar > button,
.vertical-scrollbar > button {
  display: flex;
  flex-shrink: 0;
  width: 16px;
  height: 16px;
  min-width: 0;
  padding: 0;
  background: var(--scrollbar-button);
  box-shadow: inset 1px 1px var(--chrome-border-light), inset -1px -1px var(--chrome-border-medium);
  border-radius: 0;
}
.horizontal-scrollbar > button::after,
.vertical-scrollbar > button::after {
  content: "";
  display: block;
  width: 0;
  height: 0;
}
.horizontal-scrollbar > button:not(:disabled):active,
.vertical-scrollbar > button:not(:disabled):active {
  padding: 0;
  background: var(--scrollbar-button-active);
  box-shadow: inset 1px 1px var(--chrome-border-darker), inset -1px -1px var(--chrome-shadow);
  box-shadow: none;
  outline: none;
}
.horizontal-scrollbar > .scrollbar-track,
.vertical-scrollbar > .scrollbar-track {
  flex-grow: 1;
  background: var(--scrollbar-track);
  position: relative;
  box-shadow: inset 1px 1px var(--chrome-fg-inactive), inset 2px 2px var(--chrome-border-dark), inset -1px -1px var(--tab-bg), inset -2px -2px var(--chrome-border-medium);
  overflow: hidden;
  border: 1px solid var(--chrome-border);
}
.horizontal-scrollbar > .scrollbar-track > .scrollbar-thumb,
.vertical-scrollbar > .scrollbar-track > .scrollbar-thumb {
  position: absolute;
  background: var(--primary-4);
  box-shadow: inset 1px 1px var(--primary-5), inset -1px -1px var(--primary-3), 1px 1px #777, 2px 2px #888;
  display: flex;
  align-items: center;
  justify-content: center;
}
.horizontal-scrollbar > .scrollbar-track > .scrollbar-thumb:active,
.vertical-scrollbar > .scrollbar-track > .scrollbar-thumb:active {
  background: var(--primary-3);
  box-shadow: inset 1px 1px var(--primary-4), inset -1px -1px var(--primary-2), 1px 1px #777, 2px 2px #888;
}

.horizontal-scrollbar {
  grid-template-columns: 1fr 16px 16px;
}
.horizontal-scrollbar > button:first-child {
  border-left: 0;
  border-right: 0;
  grid-column: 2;
}
.horizontal-scrollbar > button:first-child::after {
  border-right: 4px solid #000;
  border-top: 4px solid transparent;
  border-bottom: 4px solid transparent;
  margin: 3px 0 0 5px;
}
.horizontal-scrollbar > button:last-child {
  grid-column: 3;
}
.horizontal-scrollbar > button:last-child::after {
  border-left: 4px solid #000;
  border-top: 4px solid transparent;
  border-bottom: 4px solid transparent;
  margin: 3px 0 0 5px;
}
.horizontal-scrollbar > .scrollbar-track {
  grid-column: 1;
  grid-row: 1;
}
.horizontal-scrollbar > .scrollbar-track > .scrollbar-thumb {
  top: 0;
  bottom: 0;
  border-left: 1px solid #000;
  border-right: 1px solid #000;
}
.horizontal-scrollbar > .scrollbar-track > .scrollbar-thumb::after {
  display: block;
  content: "";
  width: 8px;
  height: 8px;
  background-image: linear-gradient(90deg, var(--primary-6), var(--primary-6) 1px, transparent 1px, transparent 2px), linear-gradient(90deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), linear-gradient(90deg, transparent, transparent 1px, var(--primary-2) 1px, var(--primary-2) 2px);
  background-repeat: repeat-x;
  background-position-x: 0, 0, 0;
  background-position-y: -1px, -1px, 1px;
  background-size: 2px 2px, 2px 100%, 2px 100%;
}
.horizontal-scrollbar > .scrollbar-track > .scrollbar-thumb:active::after {
  background-image: linear-gradient(90deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), linear-gradient(90deg, var(--primary-4), var(--primary-4) 1px, transparent 1px, transparent 2px), linear-gradient(90deg, transparent, transparent 1px, var(--primary-1) 1px, var(--primary-1) 2px);
}

.vertical-scrollbar {
  grid-template-rows: 1fr 16px 16px;
  width: 16px;
}
.vertical-scrollbar > button:first-child {
  border-top: 0;
  border-bottom: 0;
  grid-row: 2;
}
.vertical-scrollbar > button:first-child::after {
  border-bottom: 4px solid #000;
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  margin: 5px 0 0 3px;
}
.vertical-scrollbar > button:last-child {
  grid-row: 3;
}
.vertical-scrollbar > button:last-child::after {
  border-top: 4px solid #000;
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  margin: 5px 0 0 3px;
}
.vertical-scrollbar > .scrollbar-track {
  grid-row: 1;
}
.vertical-scrollbar > .scrollbar-track > .scrollbar-thumb {
  left: 0;
  right: 0;
  border-top: 1px solid #000;
  border-bottom: 1px solid #000;
}
.vertical-scrollbar > .scrollbar-track > .scrollbar-thumb::after {
  display: block;
  content: "";
  width: 8px;
  height: 8px;
  background-image: linear-gradient(180deg, var(--primary-6), var(--primary-6) 1px, transparent 1px, transparent 2px), linear-gradient(180deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), linear-gradient(180deg, transparent, transparent 1px, var(--primary-2) 1px, var(--primary-2) 2px);
  background-repeat: repeat-y;
  background-position-x: -1px, -1px, 1px;
  background-position-y: 0, 0, 0;
  background-size: 2px 2px, 100% 2px, 100% 2px;
}
.vertical-scrollbar > .scrollbar-track > .scrollbar-thumb:active::after {
  background-image: linear-gradient(180deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), linear-gradient(180deg, var(--primary-4), var(--primary-4) 1px, transparent 1px, transparent 2px), linear-gradient(180deg, transparent, transparent 1px, var(--primary-1) 1px, var(--primary-1) 2px);
}

/* 
 * NOTE: Do NOT use scrollbar-width or scrollbar-color here!
 * Chrome 121+ (2024) made these standard properties override ::-webkit-scrollbar styling.
 * We rely on webkit scrollbar pseudo-elements for the classic Mac OS 9 look.
 */

::-webkit-scrollbar {
  background: var(--scrollbar-track);
  box-shadow: inset 1px 1px var(--chrome-fg-inactive), inset 2px 2px var(--chrome-border-dark), inset -1px -1px var(--tab-bg), inset -2px -2px var(--chrome-border-medium);
  border: 1px solid var(--chrome-border);
  width: 16px;
  height: 16px;
}

::-webkit-scrollbar-corner {
  background: var(--scrollbar-track);
}

::-webkit-scrollbar-button,
::-webkit-scrollbar-thumb {
  background: var(--scrollbar-button);
  box-shadow: inset 1px 1px var(--chrome-border-light), inset -1px -1px var(--chrome-border-medium);
  border: 1px solid var(--chrome-border);
}

::-webkit-scrollbar-thumb {
  background-color: var(--primary-4);
  background-repeat: no-repeat;
  background-size: 8px 8px;
  background-position: center center;
}
::-webkit-scrollbar-thumb:vertical {
  background-image: repeating-linear-gradient(180deg, var(--primary-6), var(--primary-6) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(180deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(180deg, transparent, transparent 1px, var(--primary-2) 1px, var(--primary-2) 2px);
  background-position-x: calc(50% - 4px), calc(50% - 1px), 50%;
  background-size: 1px 8px, 7px 8px, 7px 8px;
  box-shadow: inset 1px 1px var(--primary-5), inset -1px -1px var(--primary-3), 0 1px #777, 0 2px #888;
}
::-webkit-scrollbar-thumb:horizontal {
  background-image: repeating-linear-gradient(90deg, var(--primary-6), var(--primary-6) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, transparent, transparent 1px, var(--primary-2) 1px, var(--primary-2) 2px);
  background-position-y: calc(50% - 4px), calc(50% - 1px), 50%;
  background-size: 8px 1px, 8px 7px, 8px 7px;
  box-shadow: inset 1px 1px var(--primary-5), inset -1px -1px var(--primary-3), 1px 0 #777, 2px 0 #888;
}
::-webkit-scrollbar-thumb:active {
  background-color: var(--primary-3);
}
::-webkit-scrollbar-thumb:active:vertical {
  background-image: repeating-linear-gradient(180deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(180deg, var(--primary-4), var(--primary-4) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(180deg, transparent, transparent 1px, var(--primary-1) 1px, var(--primary-1) 2px);
  box-shadow: inset 1px 1px var(--primary-4), inset -1px -1px var(--primary-2), 0 1px #777, 0 2px #888;
}
::-webkit-scrollbar-thumb:active:horizontal {
  background-image: repeating-linear-gradient(90deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, var(--primary-4), var(--primary-4) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, transparent, transparent 1px, var(--primary-1) 1px, var(--primary-1) 2px);
  box-shadow: inset 1px 1px var(--primary-4), inset -1px -1px var(--primary-2), 1px 0 #777, 2px 0 #888;
}

/* Scrollbar arrow buttons - Mac OS 9 style (both arrows at bottom/end) */
::-webkit-scrollbar-button {
  width: 16px;
  height: 16px;
  display: none;
}
::-webkit-scrollbar-button:active {
  background: var(--scrollbar-button-active);
  box-shadow: none;
}

/* Show only the end buttons (Mac OS 9 pattern: both arrows together at bottom) */
::-webkit-scrollbar-button:horizontal:end:decrement,
::-webkit-scrollbar-button:horizontal:end:increment,
::-webkit-scrollbar-button:vertical:end:decrement,
::-webkit-scrollbar-button:vertical:end:increment {
  display: block;
}

::-webkit-scrollbar-button:vertical:decrement {
  background-image: url(arrow-up.svg);
  background-position: 3px 5px;
  background-repeat: no-repeat;
}

::-webkit-scrollbar-button:vertical:increment {
  background-image: url(arrow-down.svg);
  background-position: 3px 5px;
  background-repeat: no-repeat;
}

::-webkit-scrollbar-button:horizontal:decrement {
  background-image: url(arrow-left.svg);
  background-position: 4px 3px;
  background-repeat: no-repeat;
}

::-webkit-scrollbar-button:horizontal:increment {
  background-image: url(arrow-right.svg);
  background-position: 4px 3px;
  background-repeat: no-repeat;
}

button, input[type=button], input[type=submit], input[type=reset], .button,
select:not([size], [multiple]), select[size="1"] {
  background-color: var(--button-bg);
  color: var(--chrome-fg);
  border: 1px solid var(--chrome-border);
  border-radius: 3px;
  box-shadow: inset 1px 1px 0 var(--button-bg), inset 2px 2px 0 var(--button-shadow-light), inset -1px -1px 1px var(--button-shadow-dark);
  padding: 2px 10px;
  min-width: 58px;
  text-align: center;
  font-weight: bold;
  cursor: default;
  user-select: none;
}
button:disabled, button.disabled, input[type=button]:disabled, input[type=button].disabled, input[type=submit]:disabled, input[type=submit].disabled, input[type=reset]:disabled, input[type=reset].disabled, .button:disabled, .button.disabled,
select:not([size], [multiple]):disabled,
select:not([size], [multiple]).disabled, select[size="1"]:disabled, select[size="1"].disabled {
  color: var(--chrome-fg-inactive);
  border-color: var(--chrome-border-dark);
  box-shadow: none;
}
button:not(:disabled, .disabled):active, button.active, input[type=button]:not(:disabled, .disabled):active, input[type=button].active, input[type=submit]:not(:disabled, .disabled):active, input[type=submit].active, input[type=reset]:not(:disabled, .disabled):active, input[type=reset].active, .button:not(:disabled, .disabled):active, .button.active,
select:not([size], [multiple]):not(:disabled, .disabled):active,
select:not([size], [multiple]).active, select[size="1"]:not(:disabled, .disabled):active, select[size="1"].active {
  background-color: var(--button-bg-active);
  color: #fff;
  box-shadow: inset 1px 1px 1px var(--chrome-border-darker), inset -1px -1px 1px var(--chrome-shadow);
}
button:focus-visible, input[type=button]:focus-visible, input[type=submit]:focus-visible, input[type=reset]:focus-visible, .button:focus-visible,
select:not([size], [multiple]):focus-visible, select[size="1"]:focus-visible {
  outline: 2px solid var(--primary-3);
  border-radius: 1px;
}

form:focus-within:not(:has(button:focus, input[type=button]:focus, input[type=submit]:focus, input[type=reset]:focus)) button:default, form:focus-within:not(:has(button:focus, input[type=button]:focus, input[type=submit]:focus, input[type=reset]:focus)) input[type=button]:default, form:focus-within:not(:has(button:focus, input[type=button]:focus, input[type=submit]:focus, input[type=reset]:focus)) input[type=submit]:default, form:focus-within:not(:has(button:focus, input[type=button]:focus, input[type=submit]:focus, input[type=reset]:focus)) input[type=reset]:default, form:focus-within:not(:has(button:focus, input[type=button]:focus, input[type=submit]:focus, input[type=reset]:focus)) .button:default {
  position: relative;
}
form:focus-within:not(:has(button:focus, input[type=button]:focus, input[type=submit]:focus, input[type=reset]:focus)) button:default::before, form:focus-within:not(:has(button:focus, input[type=button]:focus, input[type=submit]:focus, input[type=reset]:focus)) input[type=button]:default::before, form:focus-within:not(:has(button:focus, input[type=button]:focus, input[type=submit]:focus, input[type=reset]:focus)) input[type=submit]:default::before, form:focus-within:not(:has(button:focus, input[type=button]:focus, input[type=submit]:focus, input[type=reset]:focus)) input[type=reset]:default::before, form:focus-within:not(:has(button:focus, input[type=button]:focus, input[type=submit]:focus, input[type=reset]:focus)) .button:default::before {
  content: " ";
  position: absolute;
  inset: -3px;
  border-radius: 4px;
  box-sizing: border-box;
  box-shadow: 0px 0px 0px 1px black, inset 1px 1px 0 #DDDDDD, inset -1px -1px 0 #737373, inset 0 0 0 2px #ADADAD;
}

button.primary, input[type=button].primary, input[type=submit].primary, input[type=reset].primary, .button.primary {
  position: relative;
}
button.primary::before, input[type=button].primary::before, input[type=submit].primary::before, input[type=reset].primary::before, .button.primary::before {
  content: " ";
  position: absolute;
  inset: -3px;
  border-radius: 4px;
  box-sizing: border-box;
  box-shadow: 0px 0px 0px 1px black, inset 1px 1px 0 #DDDDDD, inset -1px -1px 0 #737373, inset 0 0 0 2px #ADADAD;
}

input:not([type=button], [type=submit], [type=reset], [type=checkbox], [type=radio], [type=range]), textarea, .input,
select[multiple], select[size]:not([size="1"]) {
  background: var(--content-bg);
  color: var(--content-fg);
  border: 1px solid #000;
  box-shadow: -1px -1px #888;
  margin: 2px;
  padding: 2px;
}
input:not([type=button], [type=submit], [type=reset], [type=checkbox], [type=radio], [type=range])::selection, textarea::selection, .input::selection,
select[multiple]::selection, select[size]:not([size="1"])::selection {
  background-color: var(--selection-bg);
  color: var(--selection-fg);
}
input:not([type=button], [type=submit], [type=reset], [type=checkbox], [type=radio], [type=range]):disabled, input:not([type=button], [type=submit], [type=reset], [type=checkbox], [type=radio], [type=range]).disabled, textarea:disabled, textarea.disabled, .input:disabled, .input.disabled,
select[multiple]:disabled,
select[multiple].disabled, select[size]:not([size="1"]):disabled, select[size]:not([size="1"]).disabled {
  color: #808080;
  border-color: #555;
  box-shadow: 0 0 0 1px #ddd;
}
input:not([type=button], [type=submit], [type=reset], [type=checkbox], [type=radio], [type=range]):focus, input:not([type=button], [type=submit], [type=reset], [type=checkbox], [type=radio], [type=range]).focus, textarea:focus, textarea.focus, .input:focus, .input.focus,
select[multiple]:focus,
select[multiple].focus, select[size]:not([size="1"]):focus, select[size]:not([size="1"]).focus {
  outline: 2px solid var(--primary-3);
  border-radius: 1px;
}

select[multiple], select[size]:not([size="1"]) {
  padding: 0;
}
select[multiple] > option, select[size]:not([size="1"]) > option {
  padding: 2px 6px;
}
select[multiple] > option:checked, select[size]:not([size="1"]) > option:checked {
  background-color: var(--selection-bg);
  color: var(--selection-fg);
}
select[multiple]:focus, select[size]:not([size="1"]):focus {
  box-shadow: none;
  outline: 2px solid var(--primary-3);
  border-radius: 1px;
}
select[multiple]:focus > option:checked, select[size]:not([size="1"]):focus > option:checked {
  outline: none;
}

.dropdown {
  display: inline-grid;
  grid-template-areas: "s";
}
.dropdown > select {
  appearance: none;
  grid-area: s;
  padding-right: 27px;
  text-align: left;
  box-shadow: inset 1px 1px #fff, inset -1px -1px #aaa;
}
.dropdown > select:disabled + .dropdown-button {
  color: #888;
  box-shadow: -1px 0 #aaa;
}
.dropdown > select:not(:disabled):active + .dropdown-button {
  color: #fff;
  box-shadow: inset 1px 1px #444, inset 2px 2px #555, inset -1px -1px #888, inset -2px -2px #777, -1px 0 #222;
}
.dropdown > .dropdown-button {
  justify-self: end;
  grid-area: s;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #000000;
  width: 20px;
  pointer-events: none;
  box-shadow: inset 1px 1px #ddd, inset 2px 2px #fff, inset -1px -1px #777, inset -2px -2px #aaa, -1px 0 #aaa;
  margin: 1px;
}
.dropdown > .dropdown-button::after {
  content: "";
  display: block;
  width: 7px;
  height: 10px;
  -webkit-mask-image: url(dropdown.svg);
  -webkit-mask-repeat: no-repeat;
  mask-image: url(dropdown.svg);
  mask-repeat: no-repeat;
  background: currentColor;
}

input[type=checkbox] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background: #ddd;
  border: 1px solid #000;
  box-shadow: inset 1px 1px 0 #fff, inset -1px -1px 0 #888;
  width: 12px;
  height: 12px;
  border-radius: 0;
}
input[type=checkbox]:not(:disabled):active {
  background: #777;
  box-shadow: inset 1px 1px 0 #555, inset -1px -1px 0 #999;
}
input[type=checkbox]:checked::after {
  content: "";
  display: block;
  width: 10px;
  height: 5px;
  border-bottom: 1.5px solid #000;
  border-left: 1.5px solid #000;
  margin-left: 1.5px;
  transform: rotate(-45deg);
  box-shadow: -1px 1px 0 rgba(0, 0, 0, 0.3);
}
input[type=checkbox]:disabled {
  border-color: #888;
  box-shadow: none;
}
input[type=checkbox]:disabled::after {
  box-shadow: none;
  border-color: #888;
}

input[type=checkbox]:disabled + label,
input[type=radio]:disabled + label {
  color: #777;
}

/* =============================================================================
   Toggle Component
   Checkbox with label and optional description (macOS 9 pattern)
   ============================================================================= */

.toggle {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.toggle-row {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
}

.toggle-row input[type=checkbox] {
  cursor: pointer;
}

.toggle-label {
  font-weight: normal;
}

.toggle-description {
  font-size: 11px;
  color: var(--content-fg-secondary);
  margin-left: 18px; /* Align with label text (checkbox width + gap) */
  line-height: 1.3;
}

.toggle[data-disabled] .toggle-label,
.toggle[data-disabled] .toggle-description {
  color: var(--content-fg-muted);
}

.toggle[data-disabled] .toggle-row {
  cursor: default;
}

input[type=radio] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background: linear-gradient(to bottom right, #fff, #888);
  box-shadow: inset 1px 1px 0 #ddd, inset -1px -1px 0 #888;
  border: 1px solid #000;
  width: 12px;
  height: 12px;
  border-radius: 50%;
}
input[type=radio]:checked {
  background: linear-gradient(to bottom right, #555, #fff);
  box-shadow: inset 1px 1px 0 #555;
}
input[type=radio]:checked::after {
  content: "";
  display: block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background-color: #000;
  margin-top: 2px;
  margin-left: 2px;
}
input[type=radio]:not(:disabled):active {
  background: linear-gradient(to bottom right, #444, #bbb);
  box-shadow: inset 1px 1px 0 #444;
}
input[type=radio]:disabled {
  background: #ddd;
  border-color: #888;
  box-shadow: none;
}
input[type=radio]:disabled::after {
  background-color: #888;
}

input[type=radio]:focus-visible + label,
input[type=checkbox]:focus-visible + label {
  border-radius: 1px;
  outline-offset: 0;
  position: relative;
}
input[type=radio]:focus-visible + label::after,
input[type=checkbox]:focus-visible + label::after {
  content: "";
  display: block;
  position: absolute;
  top: 0;
  left: calc(var(--spacing) - 1px);
  right: 0;
  bottom: 0;
  outline: 2px solid var(--primary-3);
  border-radius: 1px;
}

input[type=radio]:focus,
input[type=checkbox]:focus {
  outline: none;
}

label > input[type=radio]:focus-visible,
label > input[type=checkbox]:focus-visible {
  outline: 2px solid var(--primary-3);
  border-radius: 1px;
}

input[type=range] {
  -webkit-appearance: none;
  width: 100%;
  background: transparent;
  padding: 2px;
}
input[type=range]:focus-visible {
  outline: 2px solid var(--primary-3);
  border-radius: 1px;
}
input[type=range]::-moz-range-track {
  height: 3px;
  background: #AAA;
  border: 1px solid #222;
  border-radius: 2px;
  box-shadow: -1px -1px #AAA, 1px 1px #FFF;
  margin: 0 5px;
}
input[type=range]::-moz-range-thumb {
  border-radius: 0;
  box-sizing: border-box;
  background-color: var(--primary-4);
  background-image: repeating-linear-gradient(90deg, var(--primary-6), var(--primary-6) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, transparent, transparent 1px, var(--primary-2) 1px, var(--primary-2) 2px);
  background-position-x: 3px;
  background-position-y: 3px, 3px, 4px;
  background-size: 6px 1px, 6px 4px, 6px 4px;
  background-repeat: no-repeat;
  border: 1px solid #000;
  width: 14px;
  height: 13px;
  border-radius: 2px;
  box-shadow: inset 1px 1px var(--primary-5), inset -1px -1px var(--primary-3);
}
input[type=range]::-moz-range-thumb:active {
  background-color: var(--primary-3);
  background-image: repeating-linear-gradient(90deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, var(--primary-4), var(--primary-4) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, transparent, transparent 1px, var(--primary-1) 1px, var(--primary-1) 2px);
  box-shadow: inset 1px 1px var(--primary-4), inset -1px -1px var(--primary-2);
}
input[type=range]::-webkit-slider-runnable-track {
  height: 3px;
  background: #AAA;
  border: 1px solid #222;
  border-radius: 2px;
  box-shadow: -1px -1px #AAA, 1px 1px #FFF;
  margin: 0 5px;
  margin: 10px 5px;
}
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  margin-top: -5px;
  border-radius: 0;
  box-sizing: border-box;
  background-color: var(--primary-4);
  background-image: repeating-linear-gradient(90deg, var(--primary-6), var(--primary-6) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, transparent, transparent 1px, var(--primary-2) 1px, var(--primary-2) 2px);
  background-position-x: 3px;
  background-position-y: 3px, 3px, 4px;
  background-size: 6px 1px, 6px 4px, 6px 4px;
  background-repeat: no-repeat;
  border: 1px solid #000;
  width: 14px;
  height: 13px;
  border-radius: 2px;
  box-shadow: inset 1px 1px var(--primary-5), inset -1px -1px var(--primary-3);
}
input[type=range]::-webkit-slider-thumb:active {
  background-color: var(--primary-3);
  background-image: repeating-linear-gradient(90deg, var(--primary-5), var(--primary-5) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, var(--primary-4), var(--primary-4) 1px, transparent 1px, transparent 2px), repeating-linear-gradient(90deg, transparent, transparent 1px, var(--primary-1) 1px, var(--primary-1) 2px);
  box-shadow: inset 1px 1px var(--primary-4), inset -1px -1px var(--primary-2);
}

progress,
.progress-bar {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background: #BBBBBB;
  border: 1px solid #000;
  box-shadow: 1px 1px #fff, -1px -1px #AAAAAA, inset 1px 1px #888888, inset -1px -1px #DDDDDD;
  height: 12px;
}

.progress-bar {
  position: relative;
  overflow: hidden;
}
.progress-bar:not([aria-valuenow])::after, .progress-bar > .progress-bar-value {
  content: "";
  display: block;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  background: linear-gradient(to bottom, var(--primary-2), var(--primary-3), var(--primary-4), var(--primary-5), var(--primary-6), var(--primary-5), var(--primary-4), var(--primary-3), var(--primary-2), var(--primary-1));
  border-right: 1px solid #000;
  box-shadow: inset 1px 0 var(--primary-3), inset 2px 0 rgba(255, 255, 255, 0.2), inset -1px 0 var(--primary-1), inset -2px 0 var(--primary-2), 1px 0 #555555, 2px 0 #888888;
}
.progress-bar:not([aria-valuenow])::after {
  width: 50%;
  border-left: 1px solid #000;
  animation: 1s infinite linear indeterminate;
}

progress::-webkit-progress-bar {
  background: #BBBBBB;
  box-shadow: inset 1px 1px #888888, inset -1px -1px #DDDDDD;
}

progress::-webkit-progress-value {
  background: linear-gradient(to bottom, var(--primary-2), var(--primary-3), var(--primary-4), var(--primary-5), var(--primary-6), var(--primary-5), var(--primary-4), var(--primary-3), var(--primary-2), var(--primary-1));
  border-right: 1px solid #000;
  box-shadow: inset 1px 0 var(--primary-3), inset 2px 0 rgba(255, 255, 255, 0.2), inset -1px 0 var(--primary-1), inset -2px 0 var(--primary-2), 1px 0 #555555, 2px 0 #888888;
}

progress::-moz-progress-bar {
  background: linear-gradient(to bottom, var(--primary-2), var(--primary-3), var(--primary-4), var(--primary-5), var(--primary-6), var(--primary-5), var(--primary-4), var(--primary-3), var(--primary-2), var(--primary-1));
  border-right: 1px solid #000;
  box-shadow: inset 1px 0 var(--primary-3), inset 2px 0 rgba(255, 255, 255, 0.2), inset -1px 0 var(--primary-1), inset -2px 0 var(--primary-2), 1px 0 #555555, 2px 0 #888888;
}

progress:indeterminate::-moz-progress-bar {
  width: 50%;
  border-left: 1px solid #000;
  animation: 1s infinite linear indeterminate;
}

progress:not([value])::-webkit-progress-value {
  width: 50%;
  border-left: 1px solid #000;
  animation: 1s infinite linear indeterminate;
}

@keyframes indeterminate {
  from {
    margin-left: -50%;
  }
  to {
    margin-left: 100%;
  }
}
.title-bar {
  background: var(--chrome-bg-inactive);
  color: var(--chrome-fg-inactive);
  display: flex;
  gap: 4px;
}
.title-bar .title-bar-text {
  display: flex;
  flex-grow: 1;
  align-items: flex-start;
  gap: 4px;
  font-weight: bold;
  font-size: 12px;
  cursor: default;
}
.title-bar .title-bar-text::before, .title-bar .title-bar-text::after {
  display: block;
  content: "";
  flex-grow: 1;
  height: 12px;
  margin-top: 1px;
  margin-bottom: 4px;
}

.window,
.dialog {
  display: flex;
  flex-direction: column;
  padding: 2px 4px 4px;
  border: 1px solid var(--chrome-border-darker);
  background: var(--chrome-bg-inactive);
  overflow: hidden;
}

.window.active,
.window:focus-within,
.dialog.active,
.dialog:focus-within,
.menu {
  background: var(--chrome-bg);
  border: 1px solid var(--chrome-border);
  box-shadow: 1px 1px 0 var(--chrome-border), inset 1px 0 0 var(--chrome-border-light), inset 0 1px 0 var(--chrome-border-light), inset -1px 0 0 var(--chrome-shadow), inset 0 -1px 0 var(--chrome-shadow);
}

.window.active > .title-bar,
.window:focus-within > .title-bar,
.dialog.active > .title-bar,
.dialog:focus-within > .title-bar,
.menu > .title-bar,
.title-bar.active {
  background: var(--chrome-bg);
  color: var(--chrome-fg);
}
.window.active > .title-bar > .title-bar-text::before, .window.active > .title-bar > .title-bar-text::after,
.window:focus-within > .title-bar > .title-bar-text::before,
.window:focus-within > .title-bar > .title-bar-text::after,
.dialog.active > .title-bar > .title-bar-text::before,
.dialog.active > .title-bar > .title-bar-text::after,
.dialog:focus-within > .title-bar > .title-bar-text::before,
.dialog:focus-within > .title-bar > .title-bar-text::after,
.menu > .title-bar > .title-bar-text::before,
.menu > .title-bar > .title-bar-text::after,
.title-bar.active > .title-bar-text::before,
.title-bar.active > .title-bar-text::after {
  background-image: linear-gradient(0deg, var(--titlebar-stripe-light), var(--titlebar-stripe-light) 1px, transparent 1px, transparent 1px), linear-gradient(0deg, transparent, transparent 1px, var(--titlebar-stripe-dark) 1px, var(--titlebar-stripe-dark) 1px);
  background-repeat: repeat-y;
  background-position-x: -1px, 1px;
  background-position-y: -1px, -1px;
  background-size: 100% 2px, 100% 2px;
}

.menu > .title-bar {
  padding: 2px 4px 0;
}

/* Window controls: close box (left) and zoom box (right) */
.title-bar-close,
.title-bar-zoom {
  width: 13px;
  height: 13px;
  min-width: 0;
  border-radius: 0;
  border: 1px solid #222;
  margin: 2px 1px 5px;
  padding: 0;
  background: linear-gradient(135deg, #a9a9a9 0%, #c7c7c7 50%, #f1f2f1 100%);
  box-shadow: -1px -1px 0 #888, -1px 0 0 #888, 0 -1px #888, 1px 1px 0 #fff, 1px 0 0 #fff, 0 1px 0 #fff;
  cursor: default;
  visibility: hidden;
  flex-shrink: 0;
  position: relative;
}

/* Close box on the left */
.title-bar-close {
  margin-left: -1px;
}

/* Zoom box on the right */
.title-bar-zoom {
  margin-right: -1px;
}

/* Show buttons only on active window */
.window.active > .title-bar > .title-bar-close,
.window.active > .title-bar > .title-bar-zoom,
.window:focus-within > .title-bar > .title-bar-close,
.window:focus-within > .title-bar > .title-bar-zoom,
.dialog.active > .title-bar > .title-bar-close,
.dialog.active > .title-bar > .title-bar-zoom,
.dialog:focus-within > .title-bar > .title-bar-close,
.dialog:focus-within > .title-bar > .title-bar-zoom {
  visibility: visible;
}

/* Pressed state */
.title-bar-close:active,
.title-bar-zoom:active {
  background: linear-gradient(135deg, #888 0%, #999 50%, #aaa 100%);
  box-shadow: -1px -1px 0 #888, 1px 1px 0 #fff, inset 1px 1px 0 #666;
}

/* Dark mode: title bar buttons */
[data-mode="dark"] .title-bar-close,
[data-mode="dark"] .title-bar-zoom {
  border-color: #181818;
  background: linear-gradient(135deg, #2a2a2a 0%, #353535 50%, #404040 100%);
  box-shadow: -1px -1px 0 #1f1f1f, -1px 0 0 #1f1f1f, 0 -1px #1f1f1f, 1px 1px 0 #404040, 1px 0 0 #404040, 0 1px 0 #404040;
}

[data-mode="dark"] .title-bar-close:active,
[data-mode="dark"] .title-bar-zoom:active {
  background: linear-gradient(135deg, #1f1f1f 0%, #2a2a2a 50%, #353535 100%);
  box-shadow: -1px -1px 0 #1f1f1f, 1px 1px 0 #404040, inset 1px 1px 0 #181818;
}

[data-mode="dark"] .title-bar-zoom::before {
  border-color: #181818;
}

.window-body {
  flex-grow: 1;
  min-height: 0;          /* Allow shrinking in flex context */
  overflow: auto;
  color: var(--chrome-fg-inactive);
  border: 1px solid var(--chrome-border-darker);
  background: var(--tab-bg-active);
}

.window.active > .window-body,
.window:focus-within > .window-body {
  color: var(--content-fg);
  background: var(--content-bg);
  border: 1px solid var(--chrome-border);
  box-shadow: 1px 1px 0 var(--chrome-border-light), 1px 0 0 var(--chrome-border-light), 0 1px 0 var(--chrome-border-light), -1px -1px 0 var(--chrome-shadow), -1px 0 0 var(--chrome-shadow), 0 -1px 0 var(--chrome-shadow);
}

[role=menubar] {
  color: var(--chrome-fg);
  background-color: var(--chrome-bg);
}
[role=menubar] > li > ul, [role=menubar] > li > .menu {
  left: 0;
  top: 100%;
  min-width: 200px;
}

[role=menu] {
  color: var(--chrome-fg);
  background-color: var(--menu-bg);
  border: 1px solid var(--chrome-border);
  box-shadow: inset 1px 1px var(--chrome-border-light), inset -1px -1px var(--chrome-border-dark), 1px 1px var(--chrome-border);
}
[role=menu] li {
  padding: 1px 3px 1px 21px;
}
[role=menu] li[data-shortcut]::after {
  float: right;
  content: attr(data-shortcut);
  display: block;
  margin-left: 4px;
}
[role=menu] li > ul, [role=menu] li > .menu {
  left: 100%;
  margin: 0;
  top: -1px;
  min-width: 200px;
}

/* Submenus - hidden by default, shown on hover */
[role=menu] li.has-submenu {
  position: relative;
}

[role=menu] li.has-submenu > .submenu {
  display: none;
  position: absolute;
  left: 100%;
  top: -1px;
}

[role=menu] li.has-submenu.submenu-open > .submenu,
[role=menu] li.has-submenu:hover > .submenu {
  display: block;
}
[role=menu] li[role=separator] {
  border-top: 1px solid var(--chrome-border-dark);
  border-bottom: 1px solid var(--chrome-border-light);
  height: 0;
  padding: 0;
  margin: 2px 0;
}
[role=menu] li[role=checkbox][aria-checked=true]::before, [role=menu] li[role=radio][aria-checked=true]::before {
  content: "";
  position: absolute;
  left: 3px;
  top: 50%;
  margin-top: -4px;
  display: block;
  width: 9px;
  height: 8px;
  background: currentColor;
  -webkit-mask-image: url(checkmark.svg);
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-size: 7px 7px;
  mask-image: url(checkmark.svg);
  mask-repeat: no-repeat;
  mask-size: 9px 8px;
}
[role=menu] li[aria-haspopup=true]::after {
  content: "";
  display: block;
  position: absolute;
  right: 8px;
  top: 0;
  bottom: 0;
  width: 6px;
  background: currentColor;
  -webkit-mask-image: url(menu-right.svg);
  -webkit-mask-size: 6px 11px;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: center center;
  mask-image: url(menu-right.svg);
  mask-size: 6px 11px;
  mask-repeat: no-repeat;
  mask-position: center center;
}

.menu > [role=menu] {
  border: 0;
  border-top: 1px solid #555;
}

[role=menu] li:focus,
[role=menubar] li:focus {
  outline: none;
}

[role=menubar] > li {
  padding: 1px 8px;
}

[role=menu] li[role=menuitem]:hover,
[role=menu] li:focus-within,
[role=menubar] li:focus-within {
  background: var(--primary-2);
  box-shadow: inset 1px 0 var(--primary-3), inset -1px 0 #008;
  color: #fff;
}

[role=menu] li[aria-disabled],
[role=menubar] li[aria-disabled] {
  color: var(--chrome-fg-inactive);
}

/* Tab container - padding at top matches macOS 9 pattern */
.tabs {
  padding-top: 12px; /* Breathing room before tabs (macOS 9 style) */
  display: flex;
  flex-direction: column;
  height: 100%;       /* Fill parent container */
  min-height: 0;      /* Allow shrinking (important for nested flex) */
}

.tabs > menu {
  display: flex;
  gap: 28px;
  overflow: hidden;
  padding: 0 14px 0 24px;
  flex-shrink: 0;     /* Tab bar never shrinks */
}

.tabs > menu > button {
  border: 0;
  box-shadow: none;
  border-radius: 0;
  display: flex;
  padding: 0;
  min-width: 0;
  height: 23px;
  position: relative;
  background: var(--tab-bg);
  height: 23px;
  box-shadow: inset 0 1px var(--chrome-border), inset 0 2px var(--tab-bg), inset 0 3px var(--chrome-bg-inactive);
}
.tabs > menu > button:focus {
  outline: none;
}
.tabs > menu > button:focus-visible {
  text-shadow: 0 0 2px var(--primary-3);
}

.tabs > menu > button::before {
  display: block;
  content: "";
  background: url(tab.svg);
  background-position: top left;
  background-repeat: no-repeat;
  width: 14px;
  height: 23px;
  margin-left: -14px;
}

.tabs > menu > button::after {
  display: block;
  content: "";
  background: url(tab.svg);
  background-position: top right;
  background-repeat: no-repeat;
  width: 14px;
  height: 23px;
  margin-right: -14px;
}

.tabs > menu > button:not([aria-selected=true]):active {
  background: var(--button-bg-active);
  box-shadow: inset 0 1px var(--chrome-border), inset 0 2px var(--chrome-border-darker), inset 0 3px var(--button-shadow-dark);
}

.tabs > menu > button:not([aria-selected=true]):active::before,
.tabs > menu > button:not([aria-selected=true]):active::after {
  background-image: url(tab-active.svg);
}

.tabs > menu > button[aria-selected=true] {
  color: var(--chrome-fg);
  background: var(--tab-bg-active);
  box-shadow: inset 0 1px var(--chrome-border), inset 0 2px var(--tab-bg), inset 0 3px var(--chrome-border-light);
  z-index: 2;
  height: 25px;
}
.tabs > menu > button[aria-selected=true]::before, .tabs > menu > button[aria-selected=true]::after {
  background-image: url(tab-selected.svg);
  height: 25px;
}

/* Dark mode tabs - keep fancy shapes, fix text color */
[data-mode="dark"] .tabs > menu > button {
  color: var(--chrome-fg);
}

/* Dark mode tab SVGs */
[data-mode="dark"] .tabs > menu > button::before,
[data-mode="dark"] .tabs > menu > button::after {
  background-image: url(tab-dark.svg);
}

[data-mode="dark"] .tabs > menu > button:not([aria-selected=true]):active::before,
[data-mode="dark"] .tabs > menu > button:not([aria-selected=true]):active::after {
  background-image: url(tab-active-dark.svg);
}

[data-mode="dark"] .tabs > menu > button[aria-selected=true]::before,
[data-mode="dark"] .tabs > menu > button[aria-selected=true]::after {
  background-image: url(tab-selected-dark.svg);
}

/* Dark mode selected tab */
[data-mode="dark"] .tabs > menu > button[aria-selected=true] {
  background: linear-gradient(to bottom, #353535 0%, #2a2a2a 30%, #1f1f1f 100%);
  box-shadow: inset 0 1px var(--chrome-border-dark), inset 0 2px #404040;
}

.tabs > [role=tabpanel] {
  position: relative;
  z-index: 1;
  margin-top: -4px;
  background: var(--content-bg-inset);
  color: var(--content-fg);
  border: 1px solid #000;
  box-shadow: inset 1px 1px 0 #ccc, inset 2px 2px 0 #fff, inset -1px -1px 0 #999, inset -2px -2px 0 #bbb;
  flex: 1;            /* Take remaining space */
  min-height: 0;      /* Allow shrinking below content size */
  overflow: auto;     /* Scroll when content overflows */
  /* No padding here - let content inside handle padding so scrollbar is edge-to-edge */
}

/* Dark mode: tab panel border and inset shadows */
[data-mode="dark"] .tabs > [role=tabpanel] {
  border-color: var(--chrome-border-medium);
  box-shadow: inset 1px 1px 0 #353535, inset 2px 2px 0 #404040, inset -1px -1px 0 #1f1f1f, inset -2px -2px 0 #252525;
}

.list {
  background: var(--content-bg);
  color: var(--content-fg);
  border: 1px solid #000;
  box-shadow: -1px -1px #888, 1px 1px #fff;
  overflow: auto;
  cursor: default;
  flex: 1;          /* Grow to fill available space in flex containers */
  min-height: 0;    /* Allow shrinking below content size */
}
.list > [role=option] {
  padding: 2px 6px 2px 6px;
  white-space: nowrap;
}
.list > [role=option][aria-selected=true] {
  background-color: var(--selection-bg);
  color: var(--selection-fg);
}
.list > [role=option]:focus {
  outline: none;
}
.list:focus-within {
  box-shadow: none;
  outline: 2px solid var(--primary-3);
  border-radius: 1px;
}

/* List loading state */
.list--loading {
  display: flex;
  align-items: center;
  justify-content: center;
}

.list-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 24px;
}

.list-loading .progress-bar {
  width: 200px;
}

.list-loading-text {
  font-size: 12px;
  color: var(--content-fg-secondary);
}

/* List empty state */
.list--empty {
  display: flex;
  align-items: center;
  justify-content: center;
}

.list-empty {
  padding: 24px;
  text-align: center;
}

.list-empty-text {
  font-size: 12px;
  color: var(--content-fg-muted);
}

/* List error state */
.list--error {
  display: flex;
  align-items: center;
  justify-content: center;
}

.list-error {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 24px;
}

.list-error-icon {
  font-size: 16px;
}

.list-error-text {
  font-size: 12px;
  color: #c00;
}

.icon-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, 128px);
  flex-direction: row;
  flex-wrap: wrap;
}
.icon-grid > .icon {
  flex: 0 0 128px;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 4px;
}
.icon-grid > .icon > .icon-label {
  margin-top: 5px;
  text-align: center;
  padding: 1px 1px;
}
.icon-grid > .icon:focus {
  outline: none;
}
.icon-grid > .icon[aria-selected=true] > img {
  filter: brightness(0.5);
}
.icon-grid > .icon[aria-selected=true] > .icon-label {
  background-color: #000;
  color: #fff;
}
.icon-grid:focus-within > .icon[aria-selected=true] > .icon-label {
  background-color: #000;
  color: #fff;
}

.detailed {
  width: 100%;
  border-spacing: 0;
}
.detailed th {
  text-align: left;
  font-weight: normal;
  background-color: #ccc;
  color: #000;
  border: 1px solid #333;
  border-top-color: #666;
  border-left-color: #666;
  box-shadow: inset 1px 1px #fff, inset -1px -1px #888;
  padding: 2px 6px 2px 6px;
  white-space: nowrap;
}
.detailed th[role=button] {
  user-select: none;
}
.detailed th[role=button]:focus-visible {
  outline: 2px solid var(--primary-3);
  border-radius: 1px;
}
.detailed th[role=button]:active {
  background-color: #888;
  color: #fff;
  border-color: #444;
  border-top-color: #111;
  border-left-color: #111;
  box-shadow: inset 1px 1px #555, inset -1px -1px #aaa;
}
.detailed tr {
  outline: none;
  background: var(--content-bg-subtle);
}
.detailed tr:focus {
  outline: none;
}
.detailed tr[aria-selected=true] {
  background-color: var(--selection-bg);
  color: var(--selection-fg);
}
.detailed .icon[aria-selected=true] .icon-label {
  background-color: #000;
  color: #fff;
}
.detailed td {
  padding: 2px 6px 2px 6px;
  white-space: nowrap;
  border-bottom: 1px solid #fff;
}
.detailed td.icon {
  display: flex;
}
.detailed .icon {
  display: inline-flex;
  flex-direction: row;
  align-items: center;
  outline: none;
}
.detailed .icon > img {
  width: 16px;
  height: 16px;
  margin-right: 1px;
  margin-left: -4px;
}
.detailed .icon > .icon-label {
  text-align: center;
  padding: 1px 3px;
}
.detailed .icon:focus .icon-label {
  outline: none;
}
.detailed .icon[aria-selected=true] > img {
  filter: brightness(0.5);
}
.detailed .icon[aria-selected=true] > .icon-label {
  background-color: #000;
  color: #fff;
}
.detailed thead {
  position: sticky;
  top: 0;
}

.list ul[role=tree] {
  position: relative;
  margin-bottom: 1px;
}
.list ul[role=tree] > li {
  padding-left: 20px;
}
.list ul[role=tree] li {
  list-style-type: none;
  background: var(--content-bg-subtle);
}
.list ul[role=tree] li > details {
  margin: 0;
  display: block;
}
.list ul[role=tree] li > details > summary {
  margin: 0;
  display: flex;
  align-items: center;
}
.list ul[role=tree] li > details > summary::before {
  content: "";
  display: block;
  background-color: var(--primary-4);
  background-image: url(expandcollapse.svg);
  -webkit-mask-image: url(expandcollapse-mask.svg);
  mask-image: url(expandcollapse-mask.svg);
  width: 12px;
  height: 12px;
  position: absolute;
  left: 4px;
}
.list ul[role=tree] li > details > summary:active::before {
  background-color: var(--primary-2);
}
.list ul[role=tree] li > details[open] > summary::before {
  background-position: -12px;
  -webkit-mask-position: -12px;
  mask-position: -12px;
}
.list ul[role=tree] li::after, .list ul[role=tree] li ul::before {
  content: "";
  display: block;
  position: absolute;
  left: 0;
  right: 0;
  border-bottom: 1px solid #fff;
}
.list ul[role=tree] .icon {
  display: inline-flex;
  flex-direction: row;
  align-items: center;
  outline: none;
}
.list ul[role=tree] .icon > img {
  width: 16px;
  height: 16px;
  margin-right: 1px;
}
.list ul[role=tree] .icon > .icon-label {
  text-align: center;
  padding: 1px 3px;
}
.list ul[role=tree] .icon:focus .icon-label {
  outline: none;
}
.list ul[role=tree] .icon[aria-selected=true] > img {
  filter: brightness(0.5);
}
.list ul[role=tree] .icon[aria-selected=true] > .icon-label {
  background-color: #000;
  color: #fff;
}
.list ul[role=tree] [role=treeitem]:not(.icon) {
  display: inline-flex;
  outline: none;
}
.list ul[role=tree] [role=treeitem]:not(.icon)[aria-selected=true] {
  background-color: #000;
  color: #fff;
}
.list ul[role=tree] ul {
  margin-left: 8px;
  padding-left: 10px;
}
.list ul[role=tree] ul li {
  margin-left: -15px;
  padding-left: 16px;
}

/* =============================================================================
   URL Bar Component
   Browser-style location bar for the observation layer
   ============================================================================= */

.url-bar {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px;
  background: var(--chrome-bg);
  border-bottom: 1px solid var(--chrome-border);
  box-shadow: inset 0 -1px 0 var(--chrome-shadow);
}

.url-bar-nav {
  display: flex;
  gap: 2px;
}

.url-bar-nav-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  min-width: 0;
  padding: 0;
  border-radius: 3px;
  background-color: var(--button-bg);
  color: var(--chrome-fg);
  border: 1px solid var(--chrome-border);
  box-shadow: inset 1px 1px 0 var(--button-shadow-light), inset -1px -1px 1px var(--chrome-border-dark);
}

.url-bar-nav-button:disabled {
  color: var(--chrome-shadow);
  border-color: var(--chrome-border-dark);
  box-shadow: none;
  background: var(--tab-bg);
}

.url-bar-nav-button:not(:disabled):active {
  background-color: var(--button-bg-active);
  color: #fff;
  box-shadow: inset 1px 1px 1px var(--chrome-border-darker), inset -1px -1px 1px var(--chrome-shadow);
}

.url-bar-nav-button svg {
  width: 12px;
  height: 12px;
}

.url-bar-field {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 3px 8px;
  background: var(--content-bg);
  color: var(--content-fg);
  border: 1px solid var(--chrome-border);
  box-shadow: -1px -1px var(--chrome-border-dark);
  border-radius: 2px;
  min-height: 22px;
}

.url-bar-icon {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #666;
}

.url-bar-icon svg {
  width: 14px;
  height: 14px;
}

.url-bar-value {
  flex: 1;
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  color: var(--content-fg);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.url-bar[data-mode="search"] .url-bar-value:empty::before {
  content: "Search the web...";
  color: #888;
}

.url-bar[data-mode="url"] .url-bar-value:empty::before {
  content: "Enter a URL...";
  color: #888;
}

.url-bar-source {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  background: #eee;
  border: 1px solid #aaa;
  border-radius: 3px;
  font-size: 10px;
  color: #555;
}

.url-bar-source-icon {
  width: 14px;
  height: 14px;
  border-radius: 2px;
}

.url-bar-source-name {
  text-transform: capitalize;
}

/* Loading spinner animation */
.url-bar-spinner {
  animation: url-bar-spin 1s linear infinite;
}

@keyframes url-bar-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.url-bar[data-loading="true"] .url-bar-icon {
  color: var(--primary-3);
}

/* =============================================================================
   Search Result Component
   Classic web search result with link styling
   ============================================================================= */

.search-result {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 8px 12px;
}

.search-result-title {
  font-size: 14px;
  font-weight: bold;
  color: var(--link-color);
  text-decoration: underline;
  cursor: pointer;
}

.search-result-title:visited {
  color: var(--link-color-visited);
}

.search-result-title:hover {
  color: var(--link-color-hover);
}

.search-result-title:active {
  color: #CC0000;
}

.search-result-url {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  color: #006600;
}

.search-result-snippet {
  font-size: 12px;
  color: var(--content-fg);
  margin: 0;
  line-height: 1.4;
}

/* List item styling for search results */
.list-item:has(.search-result) {
  border-bottom: 1px solid var(--content-border-subtle);
}

.list-item:has(.search-result):last-child {
  border-bottom: none;
}

.list-item[data-selected="true"]:has(.search-result) {
  background: var(--selection-bg);
}

.list-item[data-selected="true"] .search-result-title {
  color: var(--primary-1);
}

.list-item[data-selected="true"] .search-result-url {
  color: #004400;
}

.list-item[data-selected="true"] .search-result-snippet {
  color: var(--content-fg);
}

/* =============================================================================
   Activity Footer Component
   Shows source attribution, count, and duration
   ============================================================================= */

.activity-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 6px 12px;
  background: var(--tab-bg-active);
  border-top: 1px solid var(--chrome-border-medium);
  font-size: 11px;
  color: var(--chrome-fg-inactive);
  margin-top: auto; /* Push to bottom of flex container */
  flex-shrink: 0;   /* Don't shrink when content is tall */
}

.activity-footer-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.activity-footer-right {
  display: flex;
  align-items: center;
  gap: 12px;
}

.activity-footer-source {
  display: flex;
  align-items: center;
  gap: 4px;
}

.activity-footer-source-icon {
  width: 14px;
  height: 14px;
  border-radius: 2px;
}

.activity-footer-source-label {
  color: #888;
}

.activity-footer-source-name {
  font-weight: 500;
  color: #333;
  text-transform: capitalize;
}

.activity-footer-count {
  color: #333;
}

.activity-footer-count-number {
  font-weight: 500;
}

.activity-footer-duration {
  color: #888;
  font-family: "Monaco", "Menlo", monospace;
}

/* =============================================================================
   Text Input Styling
   ============================================================================= */

.text-input {
  display: flex;
  align-items: center;
  gap: 4px;
}

.text-input-field {
  flex: 1;
  background: var(--content-bg);
  color: var(--content-fg);
  border: 1px solid #000;
  box-shadow: -1px -1px #888;
  padding: 4px 6px;
  font-size: 12px;
}

.text-input-field:focus {
  outline: 2px solid var(--primary-3);
  border-radius: 1px;
}

.text-input-field::selection {
  background-color: var(--selection-bg);
  color: var(--selection-fg);
}

.text-input-field:disabled {
  color: #808080;
  border-color: #555;
  box-shadow: 0 0 0 1px #ddd;
}

.text-input[data-variant="search"] .text-input-field {
  padding-left: 24px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23888'%3E%3Ccircle cx='6.5' cy='6.5' r='5' stroke='%23888' stroke-width='2' fill='none'/%3E%3Cpath d='M10 10l4 4' stroke='%23888' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: 6px center;
  background-size: 12px 12px;
}

.text-input-clear {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  min-width: 0;
  padding: 0;
  border: none;
  background: transparent;
  color: #888;
  font-size: 16px;
  cursor: pointer;
}

.text-input-clear:hover {
  color: #333;
}

.text-input-spinner {
  width: 14px;
  height: 14px;
  color: var(--primary-3);
  animation: url-bar-spin 1s linear infinite;
}

/* =============================================================================
   Layout Primitives
   ============================================================================= */

.stack {
  display: flex;
  gap: var(--stack-gap, 8px);
}

.stack[data-direction="vertical"] {
  flex-direction: column;
}

.stack[data-direction="horizontal"] {
  flex-direction: row;
}

.stack[data-align="start"] { align-items: flex-start; }
.stack[data-align="center"] { align-items: center; }
.stack[data-align="end"] { align-items: flex-end; }
.stack[data-align="stretch"] { align-items: stretch; }

.stack[data-justify="start"] { justify-content: flex-start; }
.stack[data-justify="center"] { justify-content: center; }
.stack[data-justify="end"] { justify-content: flex-end; }
.stack[data-justify="between"] { justify-content: space-between; }
.stack[data-justify="around"] { justify-content: space-around; }

.scroll-area {
  max-height: var(--scroll-max-height, 100%);
  overflow: auto;
}

/* When scroll-area is inside a tabpanel, add padding to its content */
.tabs > [role=tabpanel] > .scroll-area > * {
  padding: 16px;
}

.scroll-area[data-direction="vertical"] {
  overflow-y: auto;
  overflow-x: hidden;
}

.scroll-area[data-direction="horizontal"] {
  overflow-y: hidden;
  overflow-x: auto;
}

.split-view {
  display: flex;
  height: 100%;
}

.split-view[data-direction="horizontal"] {
  flex-direction: row;
}

.split-view[data-direction="vertical"] {
  flex-direction: column;
}

.split-view-pane {
  overflow: auto;
}

.split-view-first {
  flex-basis: var(--split-at, 50%);
  flex-shrink: 0;
}

.split-view-second {
  flex: 1;
}

.split-view-divider {
  flex-shrink: 0;
  background: #aaa;
  box-shadow: inset 1px 0 #fff, inset -1px 0 #888;
}

.split-view[data-direction="horizontal"] .split-view-divider {
  width: 4px;
}

.split-view[data-direction="vertical"] .split-view-divider {
  height: 4px;
}

/* =============================================================================
   App View
   ============================================================================= */

.app-view {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--window-bg);
}

.app-error {
  padding: 12px;
  color: #990000;
  background: #ffeeee;
  border: 1px solid #990000;
  margin: 8px;
  border-radius: 3px;
}

/* App view loading state (view-level loading for activity-driven views) */
.app-view-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex: 1;
  gap: 12px;
  padding: 24px;
}

.app-view-loading .progress-bar {
  width: 200px;
}

.app-view-loading-text {
  font-size: 12px;
  color: var(--content-fg-secondary);
}

/* App view empty state (no historical activity) */
.app-view-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex: 1;
  gap: 8px;
  padding: 24px;
  text-align: center;
}

.app-view-empty-text {
  font-size: 13px;
  color: var(--content-fg);
  font-weight: 500;
}

.app-view-empty-hint {
  font-size: 11px;
  color: var(--content-fg-secondary);
}

/* =============================================================================
   Markdown Component
   ============================================================================= */

.markdown {
  padding: 12px 16px;
  line-height: 1.6;
  color: var(--content-fg);
}

/* Markdown loading state */
.markdown--loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.markdown-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.markdown-loading .progress-bar {
  width: 200px;
}

.markdown-loading-text {
  font-size: 12px;
  color: var(--content-fg-secondary);
}

/* Markdown empty state */
.markdown--empty {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100px;
}

.markdown-empty-text {
  font-size: 12px;
  color: var(--content-fg-muted);
}

/* Markdown error state */
.markdown--error {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100px;
}

.markdown-error {
  display: flex;
  align-items: center;
  gap: 8px;
}

.markdown-error-text {
  font-size: 12px;
  color: #c00;
}

.markdown h1 {
  font-size: 20px;
  font-weight: bold;
  margin: 16px 0 8px;
  border-bottom: 1px solid var(--content-border);
  padding-bottom: 4px;
}

.markdown h2 {
  font-size: 16px;
  font-weight: bold;
  margin: 12px 0 6px;
}

.markdown h3 {
  font-size: 14px;
  font-weight: bold;
  margin: 10px 0 4px;
}

.markdown p {
  margin: 8px 0;
}

.markdown a {
  color: var(--link-color);
  text-decoration: underline;
}

.markdown a:visited {
  color: var(--link-color-visited);
}

.markdown a:hover {
  color: var(--link-color-hover);
}

.markdown code {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  background: var(--code-bg);
  color: var(--code-fg);
  padding: 1px 4px;
  border-radius: 2px;
}

.markdown pre {
  background: var(--code-bg);
  color: var(--code-fg);
  padding: 8px 12px;
  border: 1px solid var(--code-border);
  border-radius: 3px;
  overflow-x: auto;
}

.markdown pre code {
  background: transparent;
  padding: 0;
}

.markdown strong {
  font-weight: bold;
}

.markdown em {
  font-style: italic;
}

.markdown ul, .markdown ol {
  margin: 8px 0;
  padding-left: 24px;
}

.markdown li {
  margin: 4px 0;
}

.markdown blockquote {
  border-left: 3px solid var(--primary-3);
  margin: 8px 0;
  padding: 4px 12px;
  background: var(--content-bg-muted);
  color: var(--content-fg-secondary);
}

.markdown img {
  max-width: 100%;
  max-height: 400px;
  width: auto;
  height: auto;
  object-fit: contain;
  border-radius: 4px;
  margin: 8px 0;
}

/* Small inline icons/emojis - constrain SVGs that would otherwise blow up */
.markdown img[src*=".svg"],
.markdown img[src*="emoji"],
.markdown img[src*="icon"] {
  max-height: 1.5em;
  max-width: 1.5em;
  vertical-align: middle;
  display: inline;
  margin: 0 2px;
}

/* =============================================================================
   Text Primitive - Theme Appearance
   ============================================================================= */

/* Base text styling */
.text {
  color: var(--content-fg);
}

/* Variant-specific appearance */
.text[data-variant="title"] {
  color: var(--link-color);
  text-decoration: underline;
}

.text[data-variant="title"]:visited {
  color: var(--link-color-visited);
}

.text[data-variant="title"]:hover {
  color: var(--link-color-hover);
}

.text[data-variant="url"] {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  color: var(--url-color);
}

.text[data-variant="caption"] {
  font-size: 11px;
  color: var(--content-fg-secondary);
}

.text[data-variant="code"] {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  background: var(--code-bg);
  color: var(--code-fg);
  padding: 1px 4px;
  border-radius: 2px;
}

.text[data-variant="subtitle"] {
  font-weight: 500;
  color: var(--content-fg);
}

.text[data-variant="label"] {
  font-size: 11px;
  font-weight: 500;
  color: var(--content-fg-secondary);
}

/* =============================================================================
   Menu Bar (Mac OS 9 Style)
   The classic menu bar at the top of the screen
   ============================================================================= */

.menu-bar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 24px;
  z-index: 100000;
  
  display: flex;
  align-items: stretch;
  
  background: var(--chrome-bg);
  
  font-family: var(--preferred-font);
  font-size: 12px;
  font-weight: normal;
  color: var(--chrome-fg);
  user-select: none;
}

/* Double bottom border: gray above black - using ::after to ensure it's on top of all content */
.menu-bar::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 2px;
  background: linear-gradient(to bottom, var(--chrome-shadow) 0, var(--chrome-shadow) 1px, var(--chrome-border) 1px, var(--chrome-border) 2px);
  pointer-events: none;
}

/* Adjust desktop when menu bar is present */
.desktop.has-menubar {
  padding-top: 24px;
}

.desktop.has-menubar .desktop-icons {
  top: 32px; /* 24px menu bar + 8px margin */
}

/* Left side: menus */
.menu-bar-left {
  display: flex;
  align-items: stretch;
  margin: 0;
  padding: 0;
  list-style: none;
}

.menu-bar-left > li {
  position: relative;
  display: flex;
  align-items: center;
  padding: 0 10px;
  cursor: default;
}

.menu-bar-left > li:hover,
.menu-bar-left > li:focus,
.menu-bar-left > li[aria-expanded="true"] {
  background: var(--primary-2);
  color: #fff;
}

/* Extend hover highlight to cover the gray border */
.menu-bar-left > li:hover::after,
.menu-bar-left > li:focus::after,
.menu-bar-left > li[aria-expanded="true"]::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  bottom: -1px;
  height: 1px;
  background: var(--primary-2);
}

.menu-bar-left > li:focus {
  outline: none;
}

/* Apple menu */
.apple-menu {
  padding-left: 8px !important;
  padding-right: 10px !important;
}

.apple-logo {
  display: block;
  width: 13px;
  height: 16px;
  background-image: url(apple-logo.png);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

/* Invert to white when menu is highlighted */
.apple-menu:hover .apple-logo,
.apple-menu:focus .apple-logo,
.apple-menu[aria-expanded="true"] .apple-logo {
  filter: brightness(0) invert(1);
}

/* Dropdown menus from menu bar */
.menu-bar-left > li > ul[role="menu"] {
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 180px;
  margin: 0;
  padding: 2px 0;
  
  background: var(--chrome-bg);
  border: 1px solid var(--chrome-border);
  box-shadow: 
    inset 1px 1px 0 var(--chrome-border-light),
    inset -1px -1px 0 var(--chrome-border-dark),
    2px 2px 4px rgba(0,0,0,0.3);
  
  list-style: none;
  z-index: 100001;
}

.menu-bar-left > li > ul[role="menu"] li {
  padding: 2px 20px 2px 22px;
  cursor: default;
  white-space: nowrap;
}

.menu-bar-left > li > ul[role="menu"] li:hover,
.menu-bar-left > li > ul[role="menu"] li:focus {
  background: var(--primary-2);
  color: #fff;
  outline: none;
}

.menu-bar-left > li > ul[role="menu"] li[aria-disabled] {
  color: var(--chrome-fg-inactive);
}

.menu-bar-left > li > ul[role="menu"] li[aria-disabled]:hover,
.menu-bar-left > li > ul[role="menu"] li[aria-disabled]:focus {
  background: transparent;
  color: #888;
}

.menu-bar-left > li > ul[role="menu"] li[role="separator"] {
  height: 0;
  padding: 0;
  margin: 4px 0;
  border-top: 1px solid var(--chrome-border-dark);
  border-bottom: 1px solid var(--chrome-border-light);
}

.menu-bar-left > li > ul[role="menu"] li[data-shortcut]::after {
  float: right;
  content: attr(data-shortcut);
  margin-left: 20px;
  color: inherit;
  opacity: 0.8;
}

/* Center: Solid fill (same as window chrome) */
.menu-bar-center {
  flex: 1;
  background: var(--chrome-bg);
}

/* App name in menu bar - bold when focused */
.app-menu .app-name {
  font-weight: bold;
}

/* Right side: clock and AgentOS indicator */
.menu-bar-right {
  display: flex;
  align-items: center;
  gap: 0;
  padding: 0;
}

.menu-bar-clock {
  padding: 0 10px;
  font-size: 12px;
  font-variant-numeric: tabular-nums;
}

/* Direct action menus (clickable without dropdown) */
.direct-action-menu {
  cursor: pointer;
}

.direct-action-menu:hover,
.direct-action-menu:focus {
  background: var(--primary-2);
  color: #fff;
}

/* ============================================
   History Item Component
   ============================================ */

.history-item {
  display: flex;
  gap: 10px;
  padding: 8px 12px;
  align-items: flex-start;
  border-bottom: 1px solid var(--inset-shadow);
}

.history-item:last-child {
  border-bottom: none;
}

.history-item:hover {
  background: var(--highlight-bg, rgba(0, 0, 0, 0.05));
}

.history-item-icon {
  font-size: 16px;
  line-height: 1;
  flex-shrink: 0;
  margin-top: 2px;
}

.history-item-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.history-item-title {
  font-weight: 500;
}

.history-item-url {
  color: var(--content-fg-secondary);
  font-size: 11px;
}

.history-item-meta {
  display: flex;
  gap: 8px;
  font-size: 11px;
  color: var(--content-fg-muted);
}

.history-item-time {
  opacity: 0.8;
}

.history-item-source {
  opacity: 0.6;
}

/* =============================================================================
   Plugin List Component
   List of installed plugins with enable/disable toggles
   ============================================================================= */

.plugin-list {
  display: flex;
  flex-direction: column;
}

.plugin-list--loading,
.plugin-list--error,
.plugin-list--empty {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  min-height: 150px;
}

.plugin-list-loading,
.plugin-list-error,
.plugin-list-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.plugin-list-loading .progress-bar {
  width: 200px;
}

.plugin-list-loading-text,
.plugin-list-empty-text {
  font-size: 12px;
  color: var(--content-fg-secondary);
}

.plugin-list-error {
  flex-direction: row;
  gap: 8px;
}

.plugin-list-error-icon {
  font-size: 16px;
}

.plugin-list-error-text {
  font-size: 12px;
  color: #c00;
}

/* =============================================================================
   Plugin List - Master/Detail Layout
   ============================================================================= */

/* Master-detail container - override base flex-direction */
.plugin-list--master-detail {
  display: flex;
  flex-direction: row;
  gap: 0;
  height: 100%;
  min-height: 300px;
}

/* Left pane: table list */
.plugin-list-master {
  flex: 0 0 55%;
  overflow: auto;
  border-right: 1px solid #000;
  box-shadow: 1px 0 0 #fff;
}

.plugin-list-master .detailed {
  min-width: 100%;
}

.plugin-list-master .detailed tbody tr {
  cursor: pointer;
}

.plugin-list-master .detailed tbody tr:hover:not([aria-selected="true"]) {
  background: var(--content-bg-muted);
}

/* Disabled plugin text */
.plugin-disabled {
  color: var(--content-fg-muted);
}

/* Right pane: details */
.plugin-list-detail {
  flex: 1;
  overflow: auto;
  background: var(--content-bg-muted);
  min-width: 200px;
}

/* Detail panel - matches .store layout structure */
.plugin-detail {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.plugin-detail--empty {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--content-fg-muted);
  font-size: 12px;
}

.plugin-detail-empty-text {
  text-align: center;
}

.plugin-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
}

.plugin-detail-name {
  margin: 0;
  font-size: 16px;
  font-weight: bold;
  color: var(--content-fg);
}

.plugin-detail-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: var(--content-fg-secondary);
  cursor: pointer;
  white-space: nowrap;
}

.plugin-detail-toggle input {
  cursor: pointer;
}

.plugin-detail-description {
  margin: 0;
  font-size: 12px;
  color: var(--content-fg);
  line-height: 1.5;
}

.plugin-detail-section {
  margin: 0;
  padding: 8px 10px;
}

.plugin-detail-section legend {
  font-weight: bold;
  font-size: 11px;
}

.plugin-detail-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.plugin-detail-list-item {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  color: var(--content-fg);
  padding: 2px 0;
}

.plugin-detail-list-item::before {
  content: " ";
  color: var(--content-fg-muted);
}

.plugin-detail-no-tools {
  margin: 0;
  font-size: 11px;
  color: var(--content-fg-muted);
  font-style: italic;
}

/* =============================================================================
   Wallpaper Picker Component
   Grid of wallpaper thumbnails with selection
   ============================================================================= */

.wallpaper-picker {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.wallpaper-family-items {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 8px;
}

.wallpaper-family-header {
  font-weight: bold;
  margin-bottom: 4px;
  text-transform: capitalize;
}

.wallpaper-picker--loading,
.wallpaper-picker--error,
.wallpaper-picker--empty {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  min-height: 150px;
}

.wallpaper-picker-loading,
.wallpaper-picker-error,
.wallpaper-picker-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  font-size: 12px;
  color: var(--content-fg-secondary);
}

.wallpaper-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 8px;
  background: transparent;
  border: 2px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.1s;
}

.wallpaper-item:hover {
  background: var(--hover-overlay);
}

.wallpaper-item--selected {
  background: var(--selection-bg);
  border-color: var(--primary-2);
}

.wallpaper-item-thumbnail {
  width: 100%;
  aspect-ratio: 16 / 10;
  object-fit: cover;
  border: 1px solid var(--chrome-border);
  border-radius: 2px;
  box-shadow: 1px 1px 0 var(--chrome-border-light), -1px -1px 0 var(--chrome-border-dark);
}

.wallpaper-item-name {
  font-size: 11px;
  text-align: center;
  color: var(--content-fg);
  word-break: break-word;
}

.wallpaper-item--selected .wallpaper-item-name {
  font-weight: bold;
}

.wallpaper-item-default {
  font-weight: normal;
  color: var(--content-fg-secondary);
}

/* =============================================================================
   Media Header Component
   Video/audio header with thumbnail, title, creator, and duration
   ============================================================================= */

.media-header {
  display: flex;
  gap: 16px;
  padding: 16px;
  background: var(--tab-bg-active);
  border-bottom: 1px solid var(--chrome-border-medium);
}

.media-header__thumbnail {
  flex-shrink: 0;
  width: 200px;
  max-width: 40%;
  aspect-ratio: 16 / 9;
  object-fit: cover;
  border: 1px solid #000;
  border-radius: 3px;
  box-shadow: 1px 1px 0 #fff, -1px -1px 0 #888;
}

.media-header__meta {
  display: flex;
  flex-direction: column;
  gap: 6px;
  justify-content: center;
  min-width: 0; /* Allow text truncation */
}

.media-header__title {
  font-size: 16px;
  font-weight: bold;
  color: var(--content-fg);
  line-height: 1.3;
}

.media-header__creator {
  font-size: 12px;
  color: var(--link-color);
  text-decoration: underline;
  cursor: pointer;
}

.media-header__creator:visited {
  color: var(--link-color-visited);
}

.media-header__creator:hover {
  color: var(--link-color-hover);
}

.media-header__duration {
  font-size: 11px;
  font-family: "Monaco", "Menlo", monospace;
  color: var(--content-fg-secondary);
  background: #ddd;
  padding: 2px 6px;
  border-radius: 3px;
  width: fit-content;
}

/* =============================================================================
   Credential List Component
   Displays credential accounts grouped by plugin
   ============================================================================= */

.credential-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.credential-list--loading,
.credential-list--error,
.credential-list--empty {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  min-height: 150px;
}

.credential-list-loading,
.credential-list-error,
.credential-list-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  text-align: center;
}

.credential-list-loading .progress-bar {
  width: 200px;
}

.credential-list-loading-text,
.credential-list-empty-text {
  font-size: 12px;
  color: var(--content-fg-secondary);
}

.credential-list-empty-icon {
  font-size: 24px;
  opacity: 0.6;
}

.credential-list-empty-hint {
  font-size: 11px;
  color: var(--content-fg-muted);
  font-family: "Monaco", "Menlo", monospace;
}

.credential-list-error {
  flex-direction: row;
  gap: 8px;
}

.credential-list-error-icon {
  font-size: 16px;
}

.credential-list-error-text {
  font-size: 12px;
  color: #c00;
}

/* Credential table columns */
.credential-plugin {
  font-weight: 500;
  text-transform: capitalize;
}

.credential-account {
  color: var(--content-fg);
}

.credential-key-preview {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 10px;
  color: var(--content-fg-secondary);
  letter-spacing: 0.5px;
}

/* =============================================================================
   About Panel Component
   System information display
   ============================================================================= */

.about-panel {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.about-panel--loading,
.about-panel--error {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  min-height: 200px;
}

.about-panel-loading,
.about-panel-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.about-panel-loading .progress-bar {
  width: 200px;
}

.about-panel-loading-text {
  font-size: 12px;
  color: var(--content-fg-secondary);
}

.about-panel-error {
  flex-direction: row;
  gap: 8px;
}

.about-panel-error-icon {
  font-size: 16px;
}

.about-panel-error-text {
  font-size: 12px;
  color: #c00;
}

/* Header section */
.about-panel-header {
  text-align: center;
  padding: 16px 0;
}

.about-panel-title {
  margin: 0 0 8px;
  font-size: 20px;
  font-weight: bold;
}

.about-panel-tagline {
  margin: 0 0 4px;
  font-size: 12px;
  color: var(--content-fg-secondary);
}

.about-panel-version {
  margin: 0;
  font-size: 11px;
  color: var(--content-fg-muted);
}

.about-panel-description {
  padding: 0 16px;
  font-size: 12px;
  line-height: 1.5;
}

.about-panel-description p {
  margin: 0;
}

.about-panel-links {
  padding: 12px 16px 0;
}

.about-panel-link {
  display: inline-block;
  padding: 4px 12px;
  font-size: 12px;
  text-decoration: underline;
  color: var(--content-fg-secondary);
  cursor: pointer;
}

.about-panel-link:hover {
  color: var(--content-fg);
}

[data-mode="dark"] .about-panel-link {
  color: var(--content-fg-muted);
}

[data-mode="dark"] .about-panel-link:hover {
  color: var(--content-fg);
}

/* Info sections */
.about-panel-section {
  margin: 0;
  padding: 10px 12px;
}

.about-panel-section legend {
  font-weight: bold;
}

.about-panel-info {
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.about-panel-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 12px;
  font-size: 12px;
}

.about-panel-row dt {
  color: var(--content-fg-secondary);
  flex-shrink: 0;
}

.about-panel-row dd {
  margin: 0;
  text-align: right;
  color: var(--content-fg);
}

/* Paths section - values can be long */
.about-panel-info--paths .about-panel-row {
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
}

.about-panel-info--paths .about-panel-row dd {
  text-align: left;
}

.about-panel-path {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  word-break: break-all;
}

.about-panel-size {
  margin-left: 8px;
  color: var(--content-fg-muted);
  font-family: inherit;
}

/* Errors section */
.about-panel-no-errors {
  margin: 0;
  font-size: 12px;
  color: #4a4;
  padding: 4px 0;
}

/* Compact error summary */
.about-panel-errors-summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 4px 0;
}

.about-panel-errors-status {
  display: flex;
  align-items: baseline;
  gap: 8px;
}

.about-panel-last-error {
  font-size: 12px;
  color: #333;
}

.about-panel-error-count {
  font-size: 11px;
  color: #888;
}

.about-panel-view-logs {
  font-size: 11px;
  padding: 2px 8px;
  cursor: pointer;
}

/* Expanded error list */
.about-panel-errors {
  list-style: none;
  margin: 8px 0 0;
  padding: 8px;
  background: #f8f8f8;
  border: 1px solid #ccc;
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 200px;
  overflow-y: auto;
}

.about-panel-error-item {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 6px 0;
  border-bottom: 1px solid #ddd;
  font-size: 11px;
}

.about-panel-error-item:last-child {
  border-bottom: none;
}

.about-panel-error-time {
  color: #888;
  font-size: 10px;
}

.about-panel-error-context {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 10px;
  color: #555;
}

.about-panel-error-message {
  color: #c00;
}

/* =============================================================================
   Scrollbar Test Component
   Debug panel for testing scrollbar implementations
   ============================================================================= */

.scrollbar-test {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.scrollbar-test h2 {
  margin: 0;
  font-size: 16px;
}

.scrollbar-test-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 16px;
}

.scrollbar-test-box {
  font-size: 12px;
}

/* =============================================================================
   Settings Panel Component
   Schema-driven settings controls
   ============================================================================= */

.settings-panel {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.setting-item {
  padding: 4px 0;
}

.setting-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.setting-toggle input[type=checkbox] {
  cursor: pointer;
}

.setting-label {
  font-weight: normal;
}

.setting-description {
  font-size: 11px;
  color: var(--content-fg-secondary);
  margin-left: 20px;
  margin-top: 2px;
}

/* Fieldset style for settings with preview values */
.setting-fieldset {
  margin: 0;
  padding: 8px 12px 10px;
}

.setting-fieldset legend {
  padding: 0 4px;
  background: var(--content-bg);
}

.setting-fieldset legend .setting-toggle {
  font-weight: bold;
}

.setting-fieldset .setting-preview {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 12px;
  color: var(--content-fg);
  padding: 4px 0;
}

/* String map display (key  value pairs) */
.setting-map {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-top: 6px;
}

.setting-map-empty {
  font-size: 11px;
  color: var(--content-fg-muted);
  font-style: italic;
}

.setting-map-entry {
  display: flex;
  align-items: baseline;
  gap: 8px;
  padding: 4px 8px;
  background: var(--content-bg-muted);
  border: 1px solid var(--content-border);
  border-radius: 3px;
  font-size: 12px;
}

.setting-map-key {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  color: var(--content-fg);
  font-weight: 500;
}

.setting-map-arrow {
  color: var(--content-fg-muted);
  flex-shrink: 0;
}

.setting-map-value {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  color: var(--url-color);
}

/* URL/File handlers display - grouped by plugin */
.setting-handlers {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 6px;
}

.setting-handlers-empty {
  font-size: 11px;
  color: var(--content-fg-muted);
  font-style: italic;
}

.setting-handler-entry {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 6px 10px;
  background: var(--content-bg-muted);
  border: 1px solid var(--content-border);
  border-radius: 3px;
  font-size: 12px;
}

.setting-handler-plugin {
  font-weight: bold;
  font-size: 12px;
  color: var(--content-fg);
  min-width: 80px;
  flex-shrink: 0;
}

.setting-handler-patterns {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  flex: 1;
}

.setting-handler-pattern {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 10px;
  color: var(--content-fg);
  background: var(--content-bg-inset);
  padding: 2px 6px;
  border-radius: 3px;
  border: 1px solid var(--content-border);
  display: inline-flex;
  align-items: center;
  gap: 4px;
  user-select: none;
}

/* Drag handle for sortable items */
.setting-handler-pattern .drag-handle {
  color: var(--content-fg-muted);
  cursor: grab;
  font-size: 8px;
  letter-spacing: -1px;
  margin-right: 2px;
}

.setting-handler-pattern .drag-handle:active {
  cursor: grabbing;
}

/* Rank number for ordered items */
.setting-handler-pattern .plugin-rank {
  color: var(--content-fg-secondary);
  font-weight: 500;
}

/* Drag states */
.setting-handler-pattern.dragging {
  opacity: 0.5;
}

.setting-handler-pattern.drag-over {
  box-shadow: -2px 0 0 var(--primary-3);
}

/* String list display (file paths, etc.) */
.setting-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-top: 6px;
}

.setting-list-empty {
  font-size: 11px;
  color: var(--content-fg-muted);
  font-style: italic;
  padding: 4px 0;
}

.setting-list-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 4px 8px;
  background: var(--content-bg-muted);
  border: 1px solid var(--content-border);
  border-radius: 3px;
  font-size: 12px;
}

.setting-list-item-text {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  color: var(--content-fg);
  word-break: break-all;
  flex: 1;
}

.setting-list-remove {
  flex-shrink: 0;
  width: 18px;
  height: 18px;
  min-width: 0;
  padding: 0;
  border: 1px solid #888;
  border-radius: 2px;
  background: #ddd;
  color: #666;
  font-size: 14px;
  line-height: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.setting-list-remove:hover {
  background: #c00;
  border-color: #900;
  color: #fff;
}

.setting-list-add-form {
  display: flex;
  gap: 6px;
  align-items: center;
  padding: 4px 0;
}

.setting-list-add-form input {
  flex: 1;
  padding: 4px 6px;
  font-size: 11px;
  font-family: "Monaco", "Menlo", monospace;
}

.setting-list-add-form button {
  padding: 2px 8px;
  font-size: 11px;
  min-width: 50px;
}

.setting-list-add-btn {
  align-self: flex-start;
  padding: 2px 10px;
  font-size: 11px;
  margin-top: 4px;
}

/* Path setting display (download location, etc.) */
.setting-path {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.setting-path-display {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--content-bg);
  color: var(--content-fg);
  border: 1px solid #000;
  box-shadow: -1px -1px #888;
  border-radius: 2px;
}

/* Dark mode override - var(--content-bg) not resolving correctly here */
[data-mode="dark"] .setting-path-display {
  background: #181818;
}

.setting-path-value {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 12px;
  color: var(--content-fg);
  flex: 1;
  word-break: break-all;
}

.setting-path-custom {
  font-size: 10px;
  color: var(--content-fg-secondary);
  background: var(--content-bg-inset);
  padding: 2px 6px;
  border-radius: 3px;
  flex-shrink: 0;
}

.setting-path-actions {
  display: flex;
  gap: 8px;
}

.setting-path-actions button {
  font-size: 11px;
  padding: 3px 12px;
}

.setting-path-edit {
  display: flex;
  gap: 6px;
  align-items: center;
}

.setting-path-edit input {
  flex: 1;
  padding: 4px 8px;
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
}

.setting-path-edit button {
  font-size: 11px;
  padding: 3px 10px;
  min-width: 60px;
}

/* =============================================================================
   Profile Editor Component
   ============================================================================= */

.profile-editor {
  display: flex;
  height: 100%;
  min-height: 300px;
  background: var(--window-bg);
}

.profile-editor-list {
  width: 200px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  border-right: 1px solid var(--content-border);
  background: var(--content-bg);
  color: var(--content-fg);
}

.profile-editor-list-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 10px;
  border-bottom: 1px solid var(--content-border);
  background: var(--content-bg-muted);
}

.profile-editor-list-title {
  font-weight: bold;
  font-size: 11px;
}

.profile-editor-header-buttons {
  display: flex;
  gap: 4px;
}

.profile-editor-add-btn,
.profile-editor-remove-btn {
  width: 20px;
  height: 20px;
  padding: 0;
  font-size: 14px;
  font-weight: bold;
  line-height: 1;
  cursor: pointer;
}

.profile-editor-remove-btn:disabled {
  opacity: 0.4;
  cursor: default;
}

.profile-editor-profiles {
  list-style: none;
  margin: 0;
  padding: 0;
  flex: 1;
  overflow-y: auto;
}

.profile-editor-profile {
  padding: 6px 10px;
  cursor: pointer;
  border-bottom: 1px solid var(--content-border-subtle);
}

.profile-editor-profile:hover {
  background: var(--content-bg-subtle);
}

.profile-editor-profile.selected {
  background: var(--selection-bg);
  color: var(--selection-fg);
}

.profile-editor-profile-name {
  font-size: 11px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.profile-editor-empty {
  padding: 20px;
  text-align: center;
  color: var(--content-fg-secondary);
  font-size: 11px;
}

.profile-editor-empty p {
  margin: 8px 0;
}

.profile-editor-empty button {
  margin-top: 12px;
  padding: 6px 16px;
}

.profile-editor-preview {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  background: var(--content-bg);
  color: var(--content-fg);
}

.profile-editor-preview-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  border-bottom: 1px solid var(--content-border);
  background: var(--content-bg-muted);
}

.profile-editor-preview-title {
  font-weight: bold;
  font-size: 12px;
}

.profile-editor-edit-btn {
  padding: 4px 12px;
  font-size: 11px;
}

.profile-editor-preview-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  background: var(--content-bg);
  color: var(--content-fg);
}

.profile-editor-preview-content .markdown {
  font-size: 12px;
  line-height: 1.5;
}

.profile-editor-preview-footer {
  padding: 6px 12px;
  border-top: 1px solid var(--content-border);
  background: var(--content-bg-muted);
}

.profile-editor-path {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 10px;
  color: var(--content-fg-secondary);
}

.profile-editor-no-selection {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--content-fg-muted);
  font-size: 12px;
}

.profile-editor-loading,
.profile-editor-content-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  gap: 8px;
}

.profile-editor-error {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 20px;
  color: #c00;
}

.profile-editor-error-icon {
  font-size: 16px;
}

/* =============================================================================
   Plugin Grid Component
   ============================================================================= */

.plugin-grid {
  width: 100%;
  outline: none;
}

.plugin-grid--loading,
.plugin-grid--error,
.plugin-grid--empty {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  min-height: 200px;
}

.plugin-grid-loading,
.plugin-grid-error,
.plugin-grid-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.plugin-grid-loading .progress-bar {
  width: 200px;
}

.plugin-grid-loading-text,
.plugin-grid-empty-text {
  font-size: 11px;
  color: #666;
}

.plugin-grid-error {
  color: #c00;
}

.plugin-grid-error-icon {
  font-size: 24px;
}

.plugin-grid-error-text {
  font-size: 11px;
}

/* Grid item (icon + label) */
.plugin-grid-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px;
  cursor: default;
  border-radius: 4px;
  text-align: center;
  transition: background-color 0.1s;
}

.plugin-grid-item:hover {
  background: rgba(0, 0, 0, 0.05);
}

.plugin-grid-item--selected {
  background: var(--selection-bg, #3399ff);
}

.plugin-grid-item--selected .plugin-grid-item-name {
  color: var(--selection-fg, #fff);
}

.plugin-grid-item--disabled {
  opacity: 0.5;
}

.plugin-grid-item-icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 4px;
}

.plugin-grid-item-icon img {
  width: 48px;
  height: 48px;
  object-fit: contain;
  pointer-events: none;
}

.plugin-grid-item-fallback {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #fff 0%, #e0e0e0 100%);
  border-radius: 8px;
  border: 1px solid #999;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  font-size: 20px;
  font-weight: bold;
  color: #666;
}

.plugin-grid-item-name {
  font-size: 11px;
  color: #000;
  word-break: break-word;
  max-width: 100%;
  line-height: 1.3;
}

/* =============================================================================
   Plugin Browser Component
   ============================================================================= */

.plugin-browser {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--window-bg, #fff);
  outline: none;
}

.plugin-browser--loading,
.plugin-browser--error,
.plugin-browser--empty {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  min-height: 200px;
}

.plugin-browser-loading,
.plugin-browser-error,
.plugin-browser-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  font-size: 11px;
  color: #666;
}

.plugin-browser-loading .progress-bar {
  width: 200px;
}

.plugin-browser-error {
  color: #c00;
}

.plugin-browser-error-icon {
  font-size: 24px;
}

/* Toolbar */
.plugin-browser-toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 8px;
  background: var(--tab-bg-active);
  border-bottom: 1px solid var(--chrome-border-dark);
  flex-shrink: 0;
}

.plugin-browser-toolbar-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.plugin-browser-toolbar-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.plugin-browser-count {
  font-size: 11px;
  color: #666;
}

.plugin-browser-view-switcher {
  display: flex;
  gap: 2px;
  background: var(--chrome-bg-inactive);
  border: 1px solid var(--chrome-border-dark);
  border-radius: 3px;
  padding: 2px;
}

.plugin-browser-view-switcher button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 20px;
  padding: 0;
  background: transparent;
  border: 1px solid transparent;
  border-radius: 2px;
  cursor: pointer;
  color: var(--chrome-fg-inactive);
}

.plugin-browser-view-switcher button:hover {
  background: var(--button-shadow-light);
  border-color: var(--tab-bg);
}

.plugin-browser-view-switcher button.active {
  background: var(--chrome-border-light);
  border-color: var(--chrome-border-dark);
  color: var(--chrome-fg);
  box-shadow: inset 0 1px 0 var(--chrome-border-light);
}

/* Content area */
.plugin-browser-content {
  flex: 1;
  display: flex;
  overflow: hidden;
  min-height: 0;
}

.plugin-browser-content--with-detail {
  /* When detail panel is shown, split view */
}

.plugin-browser-main {
  flex: 1;
  overflow: auto;
  min-width: 0;
}

/* Icon Grid View (using classic-stylesheets .icon-grid pattern) */
.plugin-browser-icons {
  display: grid;
  grid-template-columns: repeat(6, 80px);
  gap: 8px;
  padding: 16px;
  justify-content: start;
}

.plugin-browser-icons .icon {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 4px;
  cursor: default;
  border-radius: 0;
  text-align: center;
  width: 80px;
}

.plugin-browser-icons .icon img {
  width: 32px;
  height: 32px;
  object-fit: contain;
  pointer-events: none;
}

.plugin-browser-icons .icon .icon-label {
  margin-top: 2px;
  font-size: 11px;
  color: #000;
  word-break: break-word;
  max-width: 100%;
  line-height: 1.2;
}

.plugin-browser-icons .icon--selected .icon-label {
  background: var(--selection-bg, #000080);
  color: var(--selection-fg, #fff);
  padding: 0 2px;
}

.plugin-browser-icons .icon--disabled {
  opacity: 0.5;
}

.plugin-browser-icons .icon-fallback {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #fff 0%, #ddd 100%);
  border: 1px solid #999;
  font-size: 14px;
  font-weight: bold;
  color: #666;
}

/* List View */
.plugin-browser-list {
  margin: 0;
  padding: 0;
}

.plugin-browser-list li {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  cursor: default;
  font-size: 11px;
}

.plugin-browser-list li img {
  flex-shrink: 0;
}

.plugin-browser-list li[aria-selected="true"] {
  background: var(--selection-bg, #000080);
  color: var(--selection-fg, #fff);
}

.plugin-browser-list .list-icon-fallback {
  width: 16px;
  height: 16px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: #ddd;
  border: 1px solid #999;
  font-size: 10px;
  font-weight: bold;
}

.plugin-browser-list .list-item--disabled {
  opacity: 0.6;
}

/* Details View (table) */
.plugin-browser-details {
  width: 100%;
}

.plugin-browser-details .details-icon-fallback {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  background: #ddd;
  border: 1px solid #999;
  font-size: 9px;
  font-weight: bold;
}

/* Status badges */
.status-badge {
  display: inline-block;
  padding: 1px 6px;
  font-size: 10px;
  border-radius: 3px;
}

.status-badge--enabled {
  background: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.status-badge--disabled {
  background: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

/* Detail Panel */
.plugin-detail-panel {
  width: 280px;
  flex-shrink: 0;
  border-left: 1px solid var(--chrome-border-dark);
  background: var(--content-bg-muted);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

.plugin-detail-panel-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  background: var(--tab-bg-active);
  border-bottom: 1px solid var(--tab-bg);
}

.plugin-detail-panel-header img {
  flex-shrink: 0;
}

.plugin-detail-panel-title {
  flex: 1;
  min-width: 0;
}

.plugin-detail-panel-title h2 {
  margin: 0 0 4px 0;
  font-size: 14px;
  font-weight: bold;
}

.plugin-detail-panel-close {
  flex-shrink: 0;
  padding: 2px 8px;
  font-size: 10px;
  cursor: pointer;
}

.plugin-detail-panel-description {
  margin: 0;
  padding: 12px 16px;
  font-size: 11px;
  color: #333;
  border-bottom: 1px solid #ddd;
}

.plugin-detail-panel-actions {
  padding: 12px 16px;
  border-bottom: 1px solid #ddd;
}

.plugin-detail-panel-actions button {
  width: 100%;
  padding: 6px 12px;
  font-size: 11px;
}

.plugin-detail-panel-section {
  margin: 12px 16px;
  padding: 8px;
  border: 1px solid #ccc;
  background: #fff;
}

.plugin-detail-panel-section legend {
  font-size: 11px;
  font-weight: bold;
  padding: 0 4px;
}

.plugin-detail-panel-list {
  margin: 0;
  padding: 0;
  list-style: none;
}

.plugin-detail-panel-list li {
  padding: 2px 0;
  font-size: 11px;
  font-family: "Monaco", "Menlo", monospace;
}

.plugin-detail-panel-list li::before {
  content: " ";
  color: #888;
}

/* Status bar */
.plugin-browser-status {
  padding: 4px 8px;
  background: var(--tab-bg-active);
  border-top: 1px solid var(--chrome-border-dark);
  font-size: 11px;
  color: var(--chrome-fg);
  flex-shrink: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.plugin-browser-status-desc {
  color: var(--chrome-fg-inactive);
}

/* =============================================================================
   Plugin Detail View (full page)
   ============================================================================= */

.plugin-detail-view {
  padding: 24px;
  max-width: 600px;
}

.plugin-detail-view--loading,
.plugin-detail-view--error {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  min-height: 200px;
}

.plugin-detail-view-loading,
.plugin-detail-view-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  font-size: 11px;
  color: #666;
}

.plugin-detail-view-loading .progress-bar {
  width: 200px;
}

.plugin-detail-view-error {
  color: #c00;
}

.plugin-detail-view-error-icon {
  font-size: 24px;
}

/* Header */
.plugin-detail-view-header {
  display: flex;
  gap: 16px;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid #ccc;
}

.plugin-detail-view-icon {
  flex-shrink: 0;
}

.plugin-detail-view-icon img {
  width: 64px;
  height: 64px;
  object-fit: contain;
}

.plugin-detail-view-icon-fallback {
  width: 64px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #fff 0%, #ddd 100%);
  border: 1px solid #999;
  font-size: 28px;
  font-weight: bold;
  color: #666;
}

.plugin-detail-view-info {
  flex: 1;
  min-width: 0;
}

.plugin-detail-view-name {
  margin: 0 0 8px 0;
  font-size: 18px;
  font-weight: bold;
}

.plugin-detail-view-meta {
  display: flex;
  align-items: center;
  gap: 12px;
}

.plugin-detail-view-id {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  color: #666;
}

/* Sections */
.plugin-detail-view-section {
  margin-bottom: 16px;
}

.plugin-detail-view-description {
  margin: 0;
  font-size: 12px;
  line-height: 1.5;
  color: #333;
}

.plugin-detail-view-actions {
  padding: 16px 0;
}

.plugin-detail-view-actions button {
  padding: 8px 20px;
}

.plugin-detail-view-section fieldset {
  margin: 0;
  padding: 12px;
  border: 1px solid #ccc;
  background: #fff;
}

.plugin-detail-view-section legend {
  font-size: 12px;
  font-weight: bold;
  padding: 0 6px;
}

.plugin-detail-view-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.plugin-detail-view-list-item {
  padding: 4px 8px;
  background: var(--content-bg-muted);
  border-radius: 3px;
}

.plugin-detail-view-list-item code {
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
}

.plugin-detail-view-no-tools {
  margin: 0;
  font-size: 11px;
  color: #666;
  font-style: italic;
}

/* Button variants */
.button--primary {
  background: #0066cc;
  color: #fff;
  border-color: #004c99;
}

.button--primary:hover {
  background: #0077ee;
}

.button--danger {
  background: #dc3545;
  color: #fff;
  border-color: #c82333;
}

.button--danger:hover {
  background: #e04555;
}

/* =============================================================================
   Theme Picker Component
   Used in Settings > Appearance to select OS themes
   ============================================================================= */

.theme-picker {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.theme-picker-header {
  font-weight: bold;
  margin-bottom: 4px;
}

.theme-picker-list,
.theme-picker-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.theme-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px;
  border: 1px solid var(--content-border);
  border-radius: 4px;
  background: var(--content-bg);
  color: var(--content-fg);
  cursor: pointer;
  transition: border-color 0.15s, background 0.15s;
  text-align: center;
  gap: 6px;
  font: inherit;
  position: relative;
  min-width: 80px;
}

.theme-item:hover {
  background: var(--content-bg-subtle);
}

.theme-item--selected {
  border: 2px solid var(--accent);
  background: var(--selection-bg);
  color: var(--selection-fg);
}

.theme-item--selected .theme-item-name {
  color: var(--selection-fg);
}

.theme-item-preview {
  width: 48px;
  height: 48px;
  border-radius: 4px;
  border: 1px solid #666;
  flex-shrink: 0;
}

.theme-item-preview--macos {
  background: linear-gradient(135deg, #CCCCCC 0%, #9999CC 100%);
}

.theme-item-preview--windows {
  background: linear-gradient(135deg, #008080 0%, #000080 100%);
}

.theme-item-preview--other {
  background: linear-gradient(135deg, #666666 0%, #333333 100%);
}

.theme-item-name {
  font-weight: bold;
  font-size: 11px;
  white-space: nowrap;
}

.theme-item-checkmark {
  position: absolute;
  top: 4px;
  right: 4px;
  color: var(--accent);
  font-size: 14px;
  font-weight: bold;
}

/* Loading/Error/Empty states */
.theme-picker--loading,
.theme-picker--error,
.theme-picker--empty {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.theme-picker-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  color: var(--content-fg-secondary);
}

.theme-picker-error {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #c00;
}

.theme-picker-empty {
  color: var(--content-fg-muted);
}

/* =============================================================================
   Appearance Controls Component
   Color mode toggle and accent color picker in Settings
   ============================================================================= */

.appearance-controls {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.appearance-section-header {
  font-weight: bold;
  margin-bottom: 10px;
}

/* Themed Dropdown - Custom dropdown that matches the OS theme */
.themed-dropdown {
  position: relative;
  display: inline-block;
}

.themed-dropdown-trigger {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  min-width: 180px;
  padding: 3px 8px;
  background-color: var(--button-bg);
  color: var(--chrome-fg);
  border: 1px solid var(--chrome-border);
  border-radius: 3px;
  box-shadow: inset 1px 1px 0 var(--button-bg), inset 2px 2px 0 var(--button-shadow-light), inset -1px -1px 1px var(--button-shadow-dark);
  font-weight: bold;
  cursor: default;
  user-select: none;
  text-align: left;
}

.themed-dropdown-trigger.active,
.themed-dropdown-trigger:active {
  background-color: var(--button-bg-active);
  color: #fff;
  box-shadow: inset 1px 1px 1px var(--chrome-border-darker), inset -1px -1px 1px var(--chrome-shadow);
}

.themed-dropdown-value {
  flex: 1;
}

.themed-dropdown-arrow {
  width: 0;
  height: 0;
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  border-top: 5px solid currentColor;
}

.themed-dropdown-menu {
  /* Position set by JS for fixed positioning to escape scroll containers */
  padding: 0;
  list-style: none;
  background-color: var(--menu-bg);
  border: 1px solid var(--chrome-border);
  box-shadow: inset 1px 1px var(--chrome-border-light), inset -1px -1px var(--chrome-border-dark), 2px 2px 4px rgba(0,0,0,0.2);
  z-index: 10000;
}

.themed-dropdown-menu li {
  padding: 3px 8px 3px 24px;
  cursor: default;
  position: relative;
}

.themed-dropdown-menu li:hover {
  background: var(--primary-2);
  color: #fff;
}

.themed-dropdown-menu li.selected {
  font-weight: bold;
}

.themed-dropdown-check {
  position: absolute;
  left: 6px;
  top: 50%;
  transform: translateY(-50%);
}

/* Dark mode adjustments */
[data-mode="dark"] .themed-dropdown-trigger {
  background-color: var(--button-bg);
  color: var(--chrome-fg);
}

[data-mode="dark"] .themed-dropdown-trigger.active,
[data-mode="dark"] .themed-dropdown-trigger:active {
  background-color: var(--button-bg-active);
  color: #fff;
}

[data-mode="dark"] .themed-dropdown-menu {
  background-color: var(--menu-bg);
}

/* Color Mode Toggle */
.color-mode-options {
  display: flex;
  gap: 8px;
}

.color-mode-button {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 12px 8px;
  border: 1px solid var(--content-border);
  border-radius: 8px;
  background: var(--content-bg);
  color: var(--content-fg);
  cursor: pointer;
  transition: all 0.15s;
  font: inherit;
}

.color-mode-button:hover {
  background: var(--content-bg-subtle);
}

.color-mode-button--selected {
  border: 2px solid var(--accent);
  background: var(--selection-bg);
  color: var(--selection-fg);
}

.color-mode-button-label {
  font-size: 12px;
}

.color-mode-button--selected .color-mode-button-label {
  font-weight: 600;
}

.color-mode-hint {
  margin-top: 8px;
  font-size: 11px;
  color: var(--content-fg-secondary);
}

/* Mode Preview - mini window showing what each mode looks like */
.mode-preview {
  width: 72px;
  height: 48px;
  border-radius: 4px;
  overflow: hidden;
  background-color: #666;
  background-size: cover;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(0,0,0,0.3);
}

.mode-preview--auto {
  padding: 0;
}

.mode-preview-split {
  width: 100%;
  height: 100%;
  display: flex;
}

.mode-preview-half {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background-size: cover;
  background-position: center;
  overflow: hidden;
}

.mode-preview-half--light {
  background-color: #c0c0c0;
}

.mode-preview-half--dark {
  background-color: #333;
}

/* Mini window inside the preview */
.mode-preview-window {
  width: 36px;
  height: 28px;
  border-radius: 2px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 1px 1px 3px rgba(0,0,0,0.4);
}

.mode-preview-window--light {
  background: #ddd;
  border: 1px solid #888;
}

.mode-preview-window--dark {
  background: #2d2d2d;
  border: 1px solid #555;
}

.mode-preview-titlebar {
  height: 8px;
  flex-shrink: 0;
}

.mode-preview-window--light .mode-preview-titlebar {
  background: linear-gradient(to bottom, #eee 0%, #ccc 100%);
  border-bottom: 1px solid #888;
}

.mode-preview-window--dark .mode-preview-titlebar {
  background: linear-gradient(to bottom, #444 0%, #333 100%);
  border-bottom: 1px solid #222;
}

.mode-preview-content {
  flex: 1;
}

.mode-preview-window--light .mode-preview-content {
  background: #fff;
}

.mode-preview-window--dark .mode-preview-content {
  background: #1a1a1a;
}

/* Accent Color Presets */
.accent-color-presets {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.accent-color-button {
  width: 32px;
  height: 32px;
  min-width: 32px;
  min-height: 32px;
  max-width: 32px;
  max-height: 32px;
  padding: 0;
  box-sizing: border-box;
  border-radius: 50%;
  border: 2px solid var(--content-border);
  cursor: pointer;
  transition: all 0.15s;
}

.accent-color-button--selected {
  border: 3px solid #000;
  box-shadow: 0 0 0 2px #fff, 0 0 0 4px var(--accent);
}

/* Custom Color Picker - inline dropper style */
.accent-color-picker {
  width: 32px;
  height: 32px;
  min-width: 32px;
  min-height: 32px;
  max-width: 32px;
  max-height: 32px;
  padding: 0;
  box-sizing: border-box;
  border-radius: 50%;
  border: 2px solid var(--content-border);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--content-bg);
  position: relative;
  transition: all 0.15s;
}

.accent-color-picker:hover {
  background: var(--content-bg-subtle);
}

.accent-color-picker-input {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  cursor: pointer;
}

.accent-color-picker-icon {
  font-size: 14px;
  color: var(--content-fg);
  pointer-events: none;
}

/* =============================================================================
 * Account List (Accounts app)
 * Master-detail view for managing plugin accounts and credentials
 * ============================================================================= */

.account-list {
  display: flex;
  height: 100%;
  background: var(--content-bg);
}

.account-list-loading,
.account-list-error {
  padding: 20px;
  text-align: center;
}

.account-list-error {
  color: var(--status-urgent);
}

/* Sidebar */
.account-list-sidebar {
  width: 200px;
  border-right: 1px solid var(--content-border);
  background: var(--content-bg-muted);
  display: flex;
  flex-direction: column;
}

.account-list-sidebar-header {
  padding: 10px 12px;
  border-bottom: 1px solid var(--content-border);
  font-weight: 600;
  font-size: 13px;
  color: var(--content-fg);
}

.account-list-sidebar-content {
  flex: 1;
  overflow-y: auto;
}

.account-list-empty-sidebar {
  padding: 16px;
  text-align: center;
  color: var(--content-fg-secondary);
  font-size: 12px;
}

/* Plugin Items */
.account-list-plugin-item {
  padding: 8px 12px;
  cursor: pointer;
  background: transparent;
  border-bottom: 1px solid var(--content-border-subtle);
  display: flex;
  align-items: center;
  gap: 8px;
}

.account-list-plugin-item:hover {
  background: var(--content-bg-subtle);
}

.account-list-plugin-item--selected {
  background: var(--content-bg);
}

.account-list-plugin-icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

.account-list-plugin-name {
  flex: 1;
  font-size: 13px;
  font-weight: 400;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--content-fg);
}

.account-list-plugin-name--selected {
  font-weight: 600;
}

.account-list-badge {
  background: var(--content-border);
  color: var(--content-fg-secondary);
  font-size: 11px;
  font-weight: 500;
  padding: 1px 6px;
  border-radius: 10px;
  flex-shrink: 0;
}

.account-list-badge--selected {
  background: var(--content-border-subtle);
}

/* Content area */
.account-list-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
}

.account-list-empty-content {
  text-align: center;
  color: var(--content-fg-secondary);
  margin-top: 40px;
}

.account-list-empty-content p {
  margin: 8px 0;
}

.account-list-empty-hint {
  font-size: 12px;
  margin-top: 8px;
}

.account-list-empty-content code {
  background: var(--content-bg-muted);
  padding: 2px 4px;
  border-radius: 3px;
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
}

/* Plugin Header in content */
.account-list-plugin-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 20px;
}

.account-list-plugin-header-icon {
  width: 28px;
  height: 28px;
}

.account-list-plugin-title {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: var(--content-fg);
}

.account-list-plugin-entities {
  font-size: 12px;
  color: var(--content-fg-secondary);
}

/* Credential card */
.account-list-credential {
  border: 1px solid var(--content-border);
  border-radius: 6px;
  padding: 12px;
  margin-bottom: 12px;
  background: var(--content-bg-muted);
}

.account-list-credential-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 8px;
}

.account-list-credential-label {
  font-weight: 600;
  font-size: 14px;
  color: var(--content-fg);
}

.account-list-credential-preview {
  font-size: 12px;
  color: var(--content-fg-secondary);
  font-family: "Monaco", "Menlo", monospace;
}

.account-list-remove-btn {
  background: none;
  border: 1px solid var(--content-border);
  border-radius: 4px;
  padding: 4px 10px;
  font-size: 12px;
  cursor: pointer;
  color: var(--content-fg-secondary);
}

.account-list-remove-btn:hover {
  background: var(--content-bg-subtle);
  color: var(--content-fg);
}

/* Parameters section */
.account-list-params {
  margin-top: 12px;
}

.account-list-params-header {
  font-size: 11px;
  font-weight: 600;
  color: var(--content-fg-secondary);
  margin-bottom: 6px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.account-list-edit-btn {
  background: none;
  border: none;
  color: var(--link-color);
  font-size: 11px;
  cursor: pointer;
  padding: 0;
}

.account-list-edit-btn:hover {
  text-decoration: underline;
}

.account-list-params-empty {
  padding: 8px;
  background: var(--content-bg);
  border: 1px solid var(--content-border);
  border-radius: 4px;
  font-size: 12px;
  color: var(--content-fg-muted);
}

.account-list-params-list {
  background: var(--content-bg);
  border: 1px solid var(--content-border);
  border-radius: 4px;
  overflow: hidden;
}

.account-list-param-row {
  display: flex;
  align-items: center;
  padding: 6px 8px;
  border-bottom: 1px solid var(--content-border-subtle);
  font-size: 12px;
}

.account-list-param-row:last-child {
  border-bottom: none;
}

.account-list-param-key {
  background: var(--content-bg-muted);
  padding: 2px 6px;
  border-radius: 3px;
  margin-right: 8px;
  font-weight: 500;
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
}

.account-list-param-value {
  flex: 1;
  font-family: "Monaco", "Menlo", monospace;
  font-size: 11px;
  color: var(--content-fg-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.account-list-param-remove {
  background: none;
  border: none;
  color: var(--status-urgent);
  font-size: 12px;
  cursor: pointer;
  padding: 0 4px;
  margin-left: 4px;
}

.account-list-param-remove:hover {
  text-decoration: underline;
}

/* Add param form */
.account-list-param-form {
  display: flex;
  align-items: center;
  padding: 6px 8px;
  gap: 6px;
  border-top: 1px solid var(--content-border);
  background: var(--content-bg-muted);
}

.account-list-param-input {
  padding: 4px 6px;
  border: 1px solid var(--content-border);
  border-radius: 3px;
  font-size: 12px;
  background: var(--content-bg);
  color: var(--content-fg);
}

.account-list-param-input--key {
  width: 80px;
}

.account-list-param-input--value {
  flex: 1;
}

.account-list-param-add-btn {
  padding: 4px 10px;
  background: var(--accent, #339);
  color: #fff;
  border: none;
  border-radius: 3px;
  font-size: 11px;
  cursor: pointer;
}

.account-list-param-add-btn:disabled {
  background: var(--content-border);
  cursor: not-allowed;
}

.account-list-params-actions {
  margin-top: 8px;
}

.account-list-done-btn {
  padding: 4px 12px;
  background: var(--content-bg-muted);
  color: var(--content-fg);
  border: 1px solid var(--content-border);
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
}

.account-list-done-btn:hover {
  background: var(--content-bg-subtle);
}

/* Help link */
.account-list-help {
  margin-top: 16px;
  font-size: 12px;
}

.account-list-help a {
  color: var(--link-color);
}

.account-list-help a:hover {
  text-decoration: underline;
}

.account-list-details {
  /* Container for account details - no special styling needed */
}

/* Add Account Form */
.account-list-sidebar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.account-list-add-btn {
  width: 22px;
  height: 22px;
  padding: 0;
  font-size: 16px;
  font-weight: bold;
  line-height: 1;
  background: var(--accent, #0066cc);
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.account-list-add-btn:hover {
  background: var(--accent-dark, #0052a3);
}

.account-list-add-form {
  padding: 24px;
  max-width: 400px;
}

.account-list-add-title {
  margin: 0 0 20px 0;
  font-size: 18px;
  font-weight: bold;
  color: var(--content-fg);
}

.account-list-add-empty {
  color: var(--content-fg-secondary);
  font-size: 14px;
}

.account-list-add-empty p {
  margin: 0 0 8px 0;
}

.account-list-add-field {
  margin-bottom: 16px;
}

.account-list-add-label {
  display: block;
  margin-bottom: 4px;
  font-size: 12px;
  font-weight: 600;
  color: var(--content-fg-secondary);
}

.account-list-add-select,
.account-list-add-input {
  width: 100%;
  padding: 8px 10px;
  font-size: 14px;
  border: 1px solid var(--content-border);
  border-radius: 4px;
  background: var(--content-bg);
  color: var(--content-fg);
}

.account-list-add-select:focus,
.account-list-add-input:focus {
  outline: none;
  border-color: var(--accent, #0066cc);
}

.account-list-add-help {
  margin-bottom: 16px;
  font-size: 13px;
}

.account-list-add-help a {
  color: var(--accent, #0066cc);
  text-decoration: none;
}

.account-list-add-help a:hover {
  text-decoration: underline;
}

.account-list-add-error {
  padding: 8px 12px;
  margin-bottom: 16px;
  background: var(--status-error-bg, #ffeaea);
  color: var(--status-urgent, #cc0000);
  border-radius: 4px;
  font-size: 13px;
}

.account-list-add-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.account-list-add-cancel {
  padding: 8px 16px;
  font-size: 13px;
  background: var(--content-bg);
  color: var(--content-fg);
  border: 1px solid var(--content-border);
  border-radius: 4px;
  cursor: pointer;
}

.account-list-add-cancel:hover {
  background: var(--content-bg-subtle);
}

.account-list-add-submit {
  padding: 8px 16px;
  font-size: 13px;
  background: var(--accent, #0066cc);
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 500;
}

.account-list-add-submit:hover {
  background: var(--accent-dark, #0052a3);
}

.account-list-add-submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.account-list-empty-add-btn {
  margin-top: 12px;
  padding: 8px 16px;
  font-size: 13px;
  background: var(--accent, #0066cc);
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.account-list-empty-add-btn:hover {
  background: var(--accent-dark, #0052a3);
}

/* ==========================================================================
   STORE / LIBRARY APP
   ========================================================================== */

.store {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--content-bg);
  color: var(--content-fg);
}

.store-topbar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 12px;
  background: var(--content-bg-muted);
  border-bottom: 1px solid var(--content-border);
}

.store-search {
  width: 200px;
  padding: 6px 10px;
  border: 1px solid var(--content-border);
  border-radius: 4px;
  font-size: 12px;
  outline: none;
  box-sizing: border-box;
  background: var(--content-bg);
  color: var(--content-fg);
}

.store-search:focus {
  border-color: var(--accent, #339);
}

.store-categories {
  display: flex;
  gap: 4px;
  flex: 1;
  justify-content: center;
}

.store-category-btn {
  padding: 6px 16px;
  border: none;
  background: transparent;
  color: var(--content-fg-secondary);
  border-radius: 4px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 400;
  display: flex;
  align-items: center;
  gap: 6px;
}

.store-category-btn--active {
  background: var(--content-bg);
  color: var(--content-fg);
  font-weight: 600;
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.store-category-count {
  padding: 2px 6px;
  background: var(--content-bg-subtle);
  border-radius: 10px;
  font-size: 11px;
  font-weight: 500;
  color: var(--content-fg-secondary);
}

.store-category-btn--active .store-category-count {
  background: var(--content-bg-muted);
  color: var(--content-fg-secondary);
}

/* Store toggle (Store/Installed switcher) */
.store-toggle {
  display: flex;
  align-items: center;
  background: var(--content-bg);
  border: 1px solid var(--content-border);
  border-radius: 6px;
  padding: 2px;
}

.store-toggle-btn {
  padding: 4px 12px;
  border: none;
  background: transparent;
  color: var(--content-fg-secondary);
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 400;
  transition: all 0.15s;
}

.store-toggle-btn--active {
  background: var(--accent, #0066cc);
  color: #fff;
  font-weight: 600;
}

/* Main content area */
.store-content {
  flex: 1;
  display: flex;
  min-width: 0;
  overflow: hidden;
  background: var(--content-bg);
}

/* Sidebar (matches Accounts sidebar) */
.store-sidebar {
  width: 200px;
  border-right: 1px solid var(--content-border);
  background: var(--content-bg-muted);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
}

.store-sidebar-header {
  padding: 10px 12px;
  border-bottom: 1px solid var(--content-border);
  font-weight: 600;
  font-size: 13px;
  background: var(--content-bg-muted);
}

.store-sidebar-content {
  flex: 1;
  overflow-y: auto;
}

.store-sidebar-item {
  padding: 8px 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  border-bottom: 1px solid var(--content-border-subtle);
  font-size: 13px;
  color: var(--content-fg);
}

.store-sidebar-item:hover:not(.store-sidebar-item--selected) {
  background: var(--content-bg-subtle);
}

.store-sidebar-item--selected {
  background: var(--content-bg);
  font-weight: 600;
}

.store-sidebar-item-name {
  flex: 1;
}

.store-sidebar-badge {
  background: var(--content-border);
  color: var(--content-fg-secondary);
  padding: 2px 6px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 500;
}

.store-sidebar-item--selected .store-sidebar-badge {
  background: var(--content-border-subtle);
}

/* Legacy .store-tag classes (kept for compatibility) */
.store-sidebar-title {
  font-size: 10px;
  font-weight: 600;
  color: var(--content-fg-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}

.store-tag {
  padding: 3px 8px;
  border-radius: 3px;
  cursor: pointer;
  font-size: 12px;
  color: var(--content-fg);
  background: transparent;
}

.store-tag:hover:not(.store-tag--active) {
  background: var(--content-bg-subtle);
}

.store-tag--active {
  background: var(--accent-light, #e6f0ff);
  color: var(--accent, #0066cc);
  font-weight: 500;
}

/* Items list */
.store-items {
  flex: 1;
  overflow-y: auto;
  background: var(--content-bg);
}

.store-empty {
  padding: 20px;
  text-align: center;
  color: var(--content-fg-secondary);
}

/* Group header (for search results) */
.store-group-header {
  padding: 8px 16px 6px;
  font-size: 11px;
  font-weight: 600;
  color: var(--content-fg-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  background: var(--content-bg-muted);
  border-bottom: 1px solid var(--content-border);
  position: sticky;
  top: 0;
}

/* Store list item */
.store-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 16px;
  cursor: pointer;
  background: var(--content-bg);
  border-bottom: 1px solid var(--content-border-light, #f0f0f0);
  transition: background 0.15s;
}

.store-item:last-child {
  border-bottom: none;
}

.store-item:hover {
  background: var(--content-bg-subtle);
}

.store-item-icon {
  width: 40px;
  height: 40px;
  background: var(--content-bg-muted);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  overflow: hidden;
  flex-shrink: 0;
  border: 1px solid var(--content-border);
}

.store-item-icon img {
  width: 32px;
  height: 32px;
  object-fit: contain;
}

.store-item-text {
  flex: 1;
  min-width: 0;
}

.store-item-name {
  font-size: 13px;
  font-weight: 500;
  margin-bottom: 1px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--content-fg);
}

.store-item-desc {
  font-size: 11px;
  color: var(--content-fg-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Status pills */
.store-pill {
  padding: 3px 10px;
  font-size: 11px;
  border-radius: 12px;
  font-weight: 500;
  flex-shrink: 0;
}

.store-pill--installed {
  background: var(--content-bg-muted);
  color: var(--content-fg-secondary);
}

.store-pill--get {
  background: var(--accent, #0066cc);
  color: #fff;
}

/* Dark mode refinements */
[data-mode="dark"] .store-category-btn--active {
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

[data-mode="dark"] .store-tag--active {
  background: rgba(var(--accent-rgb, 0, 102, 204), 0.2);
}

[data-mode="dark"] .store-item:hover {
  background: var(--content-bg-subtle);
}

/* Store Detail View */
.store-detail {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--content-bg);
  color: var(--content-fg);
}

.store-detail-back-btn {
  padding: 5px 10px;
  border: 1px solid var(--content-border);
  background: var(--content-bg);
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  color: var(--content-fg);
}

.store-detail-back-btn:hover {
  background: var(--content-bg-subtle);
}

.store-detail-title {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--content-fg);
}

.store-detail-content {
  padding: 30px;
  flex: 1;
  overflow-y: auto;
  background: var(--content-bg);
}

.store-detail-header {
  display: flex;
  gap: 20px;
  margin-bottom: 30px;
}

.store-detail-icon {
  width: 80px;
  height: 80px;
  background: var(--content-bg-muted);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  flex-shrink: 0;
  overflow: hidden;
  border: 1px solid var(--content-border);
}

.store-detail-icon img {
  width: 64px;
  height: 64px;
  object-fit: contain;
}

.store-detail-info {
  flex: 1;
}

.store-detail-name {
  margin: 0 0 10px 0;
  font-size: 28px;
  color: var(--content-fg);
}

.store-detail-desc {
  margin: 0 0 10px 0;
  color: var(--content-fg-secondary);
}

.store-detail-meta {
  display: flex;
  gap: 15px;
  font-size: 13px;
  color: var(--content-fg-muted);
}

/* Status badges */
.store-status {
  margin-bottom: 20px;
  padding: 12px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.store-status--ok {
  background: var(--status-success-bg, #e7f5e7);
  border: 1px solid var(--status-success-border, #c3e6c3);
}

.store-status--warning {
  background: var(--status-warning-bg, #fff3cd);
  border: 1px solid var(--status-warning-border, #ffeaa7);
}

.store-status-icon {
  font-size: 20px;
}

.store-status-title {
  font-weight: bold;
  margin-bottom: 2px;
  color: var(--content-fg);
}

.store-status-text {
  font-size: 12px;
  color: var(--content-fg-secondary);
}

/* Messages */
.store-message {
  padding: 12px;
  border-radius: 6px;
  margin-bottom: 20px;
}

.store-message--error {
  background: var(--status-error-bg, #ffeaea);
  border: 1px solid var(--status-error-border, #ffcccc);
  color: var(--status-urgent, #cc0000);
}

.store-message--success {
  background: var(--status-success-bg, #e7f5e7);
  border: 1px solid var(--status-success-border, #c3e6c3);
  color: var(--status-success, #2d8a2d);
}

/* Action buttons */
.store-actions {
  display: flex;
  gap: 10px;
  margin-bottom: 30px;
}

.store-btn {
  padding: 12px 24px;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
}

.store-btn--primary {
  background: var(--accent, #0066cc);
  color: #fff;
}

.store-btn--primary:disabled {
  background: var(--content-border);
  cursor: not-allowed;
}

.store-btn--danger {
  background: var(--content-bg);
  color: var(--status-urgent, #cc0000);
  border: 1px solid var(--status-urgent, #cc0000);
}

.store-btn--danger:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Operations/utilities/files sections */
.store-section {
  margin-bottom: 30px;
}

.store-section:last-child {
  margin-bottom: 0;
}

.store-section-title {
  font-size: 16px;
  margin-bottom: 10px;
  color: var(--content-fg);
}

.store-section-content {
  background: var(--content-bg-muted);
  border: 1px solid var(--content-border);
  border-radius: 6px;
  padding: 15px;
}

.store-section-list {
  margin: 0;
  padding: 0;
  list-style: none;
  font-size: 13px;
  font-family: monospace;
}

.store-section-list li {
  padding: 4px 0;
  color: var(--content-fg);
}

/* Dark mode adjustments */
[data-mode="dark"] .store-status--ok {
  background: rgba(45, 138, 45, 0.15);
  border-color: rgba(45, 138, 45, 0.3);
}

[data-mode="dark"] .store-status--warning {
  background: rgba(255, 193, 7, 0.15);
  border-color: rgba(255, 193, 7, 0.3);
}

[data-mode="dark"] .store-message--error {
  background: rgba(204, 0, 0, 0.15);
  border-color: rgba(204, 0, 0, 0.3);
}

[data-mode="dark"] .store-message--success {
  background: rgba(45, 138, 45, 0.15);
  border-color: rgba(45, 138, 45, 0.3);
}

/* ==========================================================================
   Plugin Detail View (Full Plugin Page with Navigation)
   ========================================================================== */

.plugin-detail {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--content-bg);
  color: var(--content-fg);
}

.plugin-detail-back-btn {
  padding: 5px 10px;
  border: 1px solid var(--content-border);
  background: var(--content-bg);
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  color: var(--content-fg);
}

.plugin-detail-back-btn:hover {
  background: var(--content-bg-subtle);
}

.plugin-detail-badge {
  padding: 3px 8px;
  background: var(--content-bg-muted);
  border-radius: 4px;
  font-size: 11px;
  color: var(--content-fg-secondary);
  font-weight: 500;
}

.plugin-detail-source-link {
  color: var(--accent, #0066cc);
  font-size: 12px;
  text-decoration: none;
}

.plugin-detail-source-link:hover {
  text-decoration: underline;
}

.plugin-detail-spacer {
  flex: 1;
}

.plugin-detail-install-btn {
  padding: 6px 16px;
  background: var(--accent, #0066cc);
  color: #fff;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
}

.plugin-detail-install-btn:hover {
  filter: brightness(1.1);
}

.plugin-detail-install-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.plugin-detail-uninstall-btn {
  padding: 6px 16px;
  background: var(--content-bg);
  color: var(--status-urgent, #cc0000);
  border: 1px solid var(--status-urgent, #cc0000);
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
}

.plugin-detail-uninstall-btn:hover {
  background: var(--content-bg-subtle);
}

.plugin-detail-uninstall-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.plugin-detail-error {
  padding: 12px 16px;
  background: var(--status-error-bg, #ffeaea);
  color: var(--status-urgent, #cc0000);
  font-size: 14px;
}

.plugin-detail-success {
  padding: 12px 16px;
  background: var(--status-success-bg, #e7f5e7);
  color: var(--status-success, #2d8a2d);
  font-size: 14px;
}

.plugin-detail-body {
  flex: 1;
  display: flex;
  overflow: hidden;
}

/* Navigation sidebar - matches .store-sidebar structure */
.plugin-detail-nav {
  width: 200px;
  border-right: 1px solid var(--content-border);
  background: var(--content-bg-muted);
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
}

.plugin-detail-nav-header {
  padding: 10px 12px;
  border-bottom: 1px solid var(--content-border);
  font-weight: 600;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--content-fg-secondary);
  background: var(--content-bg-subtle);
}

.plugin-detail-nav-inner {
  flex: 1;
  overflow-y: auto;
}

.plugin-detail-nav-item {
  padding: 8px 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--content-fg);
  background: transparent;
}

.plugin-detail-nav-item:hover:not(.plugin-detail-nav-item--active) {
  background: var(--content-bg-subtle);
}

.plugin-detail-nav-item--active {
  background: var(--content-bg);
  font-weight: 600;
}

/* Content wrapper (holds brand bar + scrollable content) */
.plugin-detail-content-wrapper {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  overflow: hidden;
}

/* Plugin brand bar (like Browser's connector bar) */
.plugin-brand-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  color: #fff;
  font-weight: 600;
  font-size: 14px;
  flex-shrink: 0;
}

.plugin-brand-bar-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.plugin-brand-bar-icon {
  width: 24px;
  height: 24px;
  object-fit: contain;
  border-radius: 4px;
}

.plugin-brand-bar-name {
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.plugin-brand-bar-source {
  display: flex;
  align-items: center;
  gap: 6px;
  color: #fff;
  text-decoration: none;
  font-size: 13px;
  font-weight: 500;
  opacity: 0.9;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.plugin-brand-bar-source:hover {
  opacity: 1;
}

.plugin-brand-bar-github {
  width: 16px;
  height: 16px;
}

/* Content area */
.plugin-detail-content {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
  background: var(--content-bg);
}

/* Overview description */
.plugin-detail-overview-desc {
  margin: 0;
  font-size: 14px;
  line-height: 1.6;
  color: var(--content-fg);
}

.plugin-detail-loading {
  text-align: center;
  padding: 40px;
  color: var(--content-fg-secondary);
}

/* Cards */
.plugin-detail-card {
  background: var(--content-bg);
  border: 1px solid var(--content-border);
  border-radius: 8px;
  padding: 20px;
}

.plugin-detail-card--spaced {
  margin-top: 16px;
}

/* Header layout */
.plugin-detail-header {
  display: flex;
  gap: 20px;
  align-items: flex-start;
}

.plugin-detail-icon {
  width: 80px;
  height: 80px;
  background: var(--content-bg-subtle);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border: 1px solid var(--content-border);
}

.plugin-detail-icon img {
  width: 64px;
  height: 64px;
  object-fit: contain;
}

.plugin-detail-icon-fallback {
  font-size: 48px;
}

.plugin-detail-info {
  flex: 1;
}

.plugin-detail-name {
  margin: 0 0 8px 0;
  font-size: 24px;
  color: var(--content-fg);
}

.plugin-detail-desc {
  margin: 0 0 8px 0;
  color: var(--content-fg-secondary);
}

.plugin-detail-date {
  font-size: 13px;
  color: var(--content-fg-muted);
}

/* Section titles */
.plugin-detail-section-title {
  margin: 0 0 16px 0;
  font-size: 18px;
  font-weight: 600;
  color: var(--content-fg);
}

.plugin-detail-subsection-title {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 8px;
  color: var(--content-fg);
}

.plugin-detail-section-desc {
  color: var(--content-fg-secondary);
  font-size: 14px;
  margin-bottom: 16px;
}

/* Tags */
.plugin-detail-tags {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.plugin-detail-tag {
  padding: 4px 10px;
  background: var(--accent-light, #e6f0ff);
  color: var(--accent, #0066cc);
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
}

/* Meta grid (Version, Author, etc.) */
.plugin-detail-meta-grid {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 8px 16px;
  font-size: 14px;
}

.plugin-detail-meta-label {
  color: var(--content-fg-secondary);
}

.plugin-detail-meta-value {
  color: var(--content-fg);
}

.plugin-detail-meta-value--success {
  color: var(--status-success, #2d8a2d);
}

/* Auth status */
.plugin-detail-auth-status {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 16px;
}

.plugin-detail-auth-status--ok {
  color: var(--status-success, #2d8a2d);
  margin-bottom: 0;
}

/* Simplified auth section */
.plugin-detail-auth-simple {
  font-size: 14px;
  color: var(--content-fg);
}

.plugin-detail-auth-simple p {
  margin: 0 0 12px 0;
}

.plugin-detail-auth-count {
  color: var(--status-success, #2d8a2d);
  font-weight: 500;
}

.plugin-detail-auth-warning {
  color: var(--status-warning, #b45309);
}

.plugin-detail-manage-btn {
  padding: 8px 16px;
  font-size: 13px;
  background: var(--accent, #0066cc);
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 500;
}

.plugin-detail-manage-btn:hover {
  background: var(--accent-dark, #0052a3);
}

.plugin-detail-auth-label {
  font-weight: 500;
}

.plugin-detail-help {
  margin-top: 16px;
}

.plugin-detail-help-label {
  color: var(--content-fg-secondary);
  font-size: 14px;
}

/* Code styles */
.plugin-detail-mono {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

.plugin-detail-code {
  background: var(--content-bg-muted);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 12px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  color: var(--content-fg);
}

/* Entity cards */
.plugin-detail-entity-card {
  background: var(--content-bg-subtle);
  border: 1px solid var(--content-border);
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 12px;
}

.plugin-detail-entity-card:last-child {
  margin-bottom: 0;
}

.plugin-detail-entity-name {
  margin: 0 0 8px 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--content-fg);
}

.plugin-detail-entity-term {
  font-size: 13px;
  color: var(--content-fg-secondary);
  margin-bottom: 8px;
}

.plugin-detail-entity-section {
  margin-top: 12px;
}

.plugin-detail-entity-label {
  font-size: 13px;
  font-weight: 500;
  margin-bottom: 4px;
  color: var(--content-fg);
}

.plugin-detail-mapping-code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 12px;
  background: var(--content-bg);
  padding: 8px;
  border-radius: 4px;
  color: var(--content-fg);
}

/* Lists */
.plugin-detail-list {
  margin: 0;
  padding-left: 20px;
  font-size: 13px;
  color: var(--content-fg);
}

.plugin-detail-list li {
  margin-bottom: 4px;
}

/* Operations/Utilities */
.plugin-detail-operation {
  margin-bottom: 20px;
  padding-bottom: 20px;
  border-bottom: 1px solid var(--content-border);
}

.plugin-detail-operation:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: none;
}

.plugin-detail-operation-name {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 15px;
  font-weight: 600;
  margin-bottom: 4px;
  color: var(--content-fg);
}

.plugin-detail-operation-desc {
  font-size: 14px;
  color: var(--content-fg-secondary);
  margin-bottom: 8px;
}

.plugin-detail-operation-returns {
  font-size: 13px;
  margin-bottom: 8px;
  color: var(--content-fg);
}

/* Security section */
.plugin-detail-security-section {
  margin-bottom: 20px;
}

.plugin-detail-security-group {
  margin-bottom: 8px;
}

/* Legal section */
.plugin-detail-disclaimer {
  background: var(--status-warning-bg, #fffbeb);
  border: 1px solid var(--status-warning-border, #fde68a);
  border-radius: 6px;
  padding: 12px;
  margin-bottom: 20px;
}

.plugin-detail-disclaimer-content {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.plugin-detail-disclaimer-text {
  font-size: 13px;
  color: var(--content-fg);
}

.plugin-detail-disclaimer-text p {
  margin: 4px 0 0 0;
}

.plugin-detail-links {
  margin: 0;
  padding-left: 20px;
  font-size: 14px;
  list-style: disc;
}

.plugin-detail-links li {
  margin-bottom: 6px;
}

.plugin-detail-link {
  color: var(--accent, #0066cc);
  text-decoration: none;
}

.plugin-detail-link:hover {
  text-decoration: underline;
}

/* Dark mode overrides for Plugin Detail */
[data-mode="dark"] .plugin-detail-nav-item--active {
  background: rgba(var(--accent-rgb, 0, 102, 204), 0.2);
}

[data-mode="dark"] .plugin-detail-tag {
  background: rgba(var(--accent-rgb, 0, 102, 204), 0.2);
}

[data-mode="dark"] .plugin-detail-error {
  background: rgba(204, 0, 0, 0.15);
}

[data-mode="dark"] .plugin-detail-success {
  background: rgba(45, 138, 45, 0.15);
}

[data-mode="dark"] .plugin-detail-disclaimer {
  background: rgba(255, 193, 7, 0.15);
  border-color: rgba(255, 193, 7, 0.3);
}

/* =============================================================================
   Plugin Credentials Component (Shared)
   Used in Accounts app and Library Authentication tab
   ============================================================================= */

.plugin-credentials {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.plugin-credentials-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.plugin-credentials-icon {
  width: 48px;
  height: 48px;
  border-radius: 8px;
  object-fit: contain;
  flex-shrink: 0;
  background: var(--content-bg-muted);
  border: 1px solid var(--content-border);
}

.plugin-credentials-info {
  flex: 1;
  min-width: 0;
}

.plugin-credentials-name {
  margin: 0 0 4px 0;
  font-size: 16px;
  font-weight: bold;
  color: var(--content-fg);
}

.plugin-credentials-entities {
  font-size: 12px;
  color: var(--content-fg-secondary);
}

.plugin-credentials-empty {
  padding: 20px;
  text-align: center;
  color: var(--content-fg-secondary);
  background: var(--content-bg-muted);
  border-radius: 6px;
}

.plugin-credentials-empty p {
  margin: 0 0 8px 0;
}

.plugin-credentials-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.plugin-credentials-card {
  border: 1px solid var(--content-border);
  border-radius: 6px;
  padding: 12px;
  background: var(--content-bg-muted);
}

.plugin-credentials-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.plugin-credentials-card-label {
  font-weight: 600;
  font-size: 14px;
  color: var(--content-fg);
}

.plugin-credentials-card-preview {
  font-size: 12px;
  color: var(--content-fg-secondary);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

.plugin-credentials-remove-btn {
  padding: 4px 8px;
  font-size: 11px;
  color: var(--status-urgent, #c00);
  background: transparent;
  border: 1px solid var(--status-urgent, #c00);
  border-radius: 4px;
  cursor: pointer;
}

.plugin-credentials-remove-btn:hover {
  background: var(--status-urgent, #c00);
  color: #fff;
}

.plugin-credentials-params {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--content-border);
}

.plugin-credentials-params--readonly {
  background: transparent;
}

.plugin-credentials-params-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  font-size: 11px;
  font-weight: 600;
  color: var(--content-fg-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.plugin-credentials-edit-btn {
  padding: 2px 8px;
  font-size: 11px;
  background: var(--content-bg);
  border: 1px solid var(--content-border);
  border-radius: 4px;
  cursor: pointer;
  color: var(--content-fg);
}

.plugin-credentials-params-empty {
  font-size: 12px;
  color: var(--content-fg-muted);
  font-style: italic;
}

.plugin-credentials-params-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.plugin-credentials-param-row {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
}

.plugin-credentials-param-key {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  background: var(--content-bg);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 11px;
  color: var(--content-fg);
}

.plugin-credentials-param-value {
  color: var(--content-fg-secondary);
}

.plugin-credentials-param-remove {
  padding: 0 4px;
  font-size: 14px;
  background: transparent;
  border: none;
  color: var(--status-urgent, #c00);
  cursor: pointer;
  line-height: 1;
}

.plugin-credentials-param-form {
  display: flex;
  gap: 6px;
  margin-top: 8px;
}

.plugin-credentials-param-input {
  padding: 4px 8px;
  font-size: 12px;
  border: 1px solid var(--content-border);
  border-radius: 4px;
  background: var(--content-bg);
  color: var(--content-fg);
}

.plugin-credentials-param-input--key {
  width: 100px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

.plugin-credentials-param-input--value {
  flex: 1;
}

.plugin-credentials-param-add-btn {
  padding: 4px 10px;
  font-size: 11px;
  background: var(--accent, #0066cc);
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.plugin-credentials-param-add-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.plugin-credentials-params-actions {
  margin-top: 8px;
  text-align: right;
}

.plugin-credentials-done-btn {
  padding: 4px 12px;
  font-size: 11px;
  background: var(--content-bg);
  border: 1px solid var(--content-border);
  border-radius: 4px;
  cursor: pointer;
  color: var(--content-fg);
}

.plugin-credentials-help {
  margin-top: 8px;
}

.plugin-credentials-help-link {
  font-size: 13px;
  color: var(--accent, #0066cc);
  text-decoration: none;
}

.plugin-credentials-help-link:hover {
  text-decoration: underline;
}
